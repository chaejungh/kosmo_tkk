<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>회원가입 화면</title>
    <link rel="stylesheet" href="/home.css">
</head>
<body>
<section id="join" class="py-100">
    <div class="container">
        <h1 class="fz-title text-center my-100">회원가입</h1>
        <div class="join-wrap">
            <div class="flex flex-column gap-30">
                <div class="input-group flex justify-content-between align-times-center">
                    <label for="username">아이디</label>
                    <input type="text" class="input" name="username" id="username"
                           placeholder="아이디를 입력해주세요">
                    <button type="button" id="check-username-btn" class="btn btn-secondary">중복확인</button>
                </div>
                <p id="username-message" class="color-accent"></p>
                <script>
                    document.getElementById('check-username-btn').addEventListener('click', async function() {
                        const username = document.getElementById('username').value.trim();
                        const message = document.getElementById('username-message');

                        if (!username) {
                            message.textContent = '아이디를 입력해주세요.';
                            message.style.color = 'red';
                            return;
                        }

                        try {
                            const response = await fetch(`/api/users/check-username?username=${encodeURIComponent(username)}`);
                            const data = await response.json();

                            if (data.exists) {
                                message.textContent = '이미 사용 중인 아이디입니다.';
                                message.style.color = 'red';
                            } else {
                                message.textContent = '사용 가능한 아이디입니다!';
                                message.style.color = 'green';
                            }
                        } catch (error) {
                            console.error(error);
                            message.textContent = '서버 요청 중 오류가 발생했습니다.';
                            message.style.color = 'red';
                        }
                    });
                </script>

                <div class="input-group flex justify-content-between align-times-center">
                    <label for="password">비밀번호</label>
                    <input type="text" class="input" name="password" id="password"
                           placeholder="비밀번호를 입력해주세요">
                </div>
                <div class="input-group flex justify-content-between align-times-center">
                    <label for="password-check">비밀번호 확인</label>
                    <input type="text" class="input" name="passwordCheck" id="password-check"
                           placeholder="비밀번호 확인을 입력해주세요">
                    <div class="input-group flex justify-content-between align-times-center">
                        <label for="name">이름</label>
                        <input type="text" class="input" name="name" id="name"
                               placeholder="이름을 입력해주세요">
                    </div>
                    <div class="input-group flex justify-content-between align-times-center">
                        <label for="nickname">닉네임</label>
                        <input type="text" class="input" name="nickName" id="nickname"
                               placeholder="닉네임을 입력해주세요">
                    </div>
                    <div class="input-group flex justify-content-between align-times-center">
                        <label for="phone">전화번호</label>
                        <input type="text" class="input" name="phone" id="phone"
                               placeholder="전화번호를 입력해주세요">
                    </div>
                    <div class="input-group flex justify-content-between align-times-center">
                        <label for="email">이메일</label>
                        <input type="text" class="input" name="email" id="email"
                               placeholder="이메일을 입력해주세요">
                    </div>
                    <div class="input-group flex justify-content-start align-times-center px-20">
                        <label for="gender">성별</label>
                        <div class="flex justify-content-start align-items-center gap-20">
                            <div class="flex justify-content-start align-items-center gap-10">
                                <input type="radio" name="gender" id="male">
                                <label for="male">남자</label>
                        </div>
                            <div class="flex justify-content-start align-items-center gap-10">
                                <input type="radio" name="gender" id="female">
                                <label for="female">여자</label>
                        </div>
                    </div>
                </div>
                    <div class="input-group flex justify-content-between align-times-center">
                        <label for="birth">생년월일</label>
                        <input type="text" class="input" name="birth" id="birth"
                               placeholder="생년월일을 입력해주세요">
                    </div>
                    <div class="agree-text flex align-items-center mt-50 gap-20">
                        <p>전체동의</p>
                        <p class="color-accent">
                            ※전체동의 시 할인쿠폰이 제공됩니다 :)
                        </p>
                    </div>
                    <div class="border-box flex justify-content-between">
                        <div class="flex gap-10">
                            <input type="radio" name="agreement" id="agreement">
                            <label for="agreement">
                                이용약관 및 개인정보 처리방침, 이벤트 및 할인 소식 알림 동의[선택]
                            <br>
                            예, 모두 동의합니다.
                            </label>
                        </div>
                        <div>
                            <a href="" class="link-all">전체보기</a>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-lg">회원가입</button>
            </div>
        </div>
    </div>
    </div>
</section>
</body>
</html>