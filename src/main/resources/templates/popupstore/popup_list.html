<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>팝업스토어 목록 - 더쿠쿠</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 홈이랑 스타일 통일 -->
    <link rel="stylesheet" th:href="@{/css/home.css}">
    <link rel="stylesheet" th:href="@{/css/board.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">

    <style>
        .popup-list-page {
            max-width: 960px;
            margin: 0 auto;
            padding: 16px;
        }

        .popup-list-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .popup-list-title {
            font-size: 18px;
            font-weight: 700;
        }

        .popup-list-sub {
            font-size: 12px;
            color: #6b7280;
        }

        .popup-card {
            border-radius: 16px;
            background: #ffffff;
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
            overflow: hidden;
            margin-bottom: 14px;
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        .popup-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.10);
        }

        .popup-thumb-wrap {
            width: 100%;
            height: 160px;
            background: #e5e7eb;
            overflow: hidden;
        }

        .popup-thumb {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .popup-info {
            padding: 12px 14px 14px;
        }

        .popup-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 4px;
            color: #111827;
        }

        .popup-place {
            font-size: 13px;
            color: #6b7280;
            margin-bottom: 4px;
        }

        .popup-date {
            font-size: 13px;
            color: #4b5563;
            margin-bottom: 2px;
        }

        .popup-region {
            font-size: 11px;
            color: #9ca3af;
        }

        .popup-empty {
            text-align: center;
            padding: 24px 0;
            color: #9ca3af;
            font-size: 13px;
        }
    </style>
</head>

<body>
<div class="popup-list-page">


    <div class="popup-list-header">
        <div>
            <div class="popup-list-title">팝업스토어 목록</div>
            <div class="popup-list-sub">더쿠쿠에 등록된 팝업 정보를 한 눈에 볼 수 있어요.</div>
        </div>
        <a th:href="@{/}" style="font-size:12px; color:#4f46e5; text-decoration:none;">
            홈으로 →
        </a>
    </div>

    <!-- 데이터 없을 때 -->
    <div class="popup-empty" th:if="${#lists.isEmpty(popupList)}">
        등록된 팝업스토어가 없습니다.
    </div>

    <!-- 리스트 반복 -->
    <div th:each="item : ${popupList}"
         class="popup-card"
         th:onclick="'location.href=\'/popupstore/' + ${item.id} + '/detail.do\''">

        <!-- 배너 이미지 영역 -->
        <div class="popup-thumb-wrap">
            <img class="popup-thumb"
                 th:src="${item.bannerImageUrl != null} ? ${item.bannerImageUrl} : @{/images/default-popup.jpg}"
                 alt="팝업 썸네일">
        </div>

        <!-- 텍스트 정보 -->
        <div class="popup-info">
            <!-- 제목 -->
            <div class="popup-title" th:text="${item.title}">팝업 제목</div>

            <!-- 장소명 (없으면 지역명으로 대체) -->
            <div class="popup-place"
                 th:text="${item.placeName != null && !#strings.isEmpty(item.placeName)}
                          ? ${item.placeName}
                          : (${item.regionName} != null ? ${item.regionName} : '장소 미정')">
                장소명
            </div>

            <!-- 기간 -->
            <div class="popup-date"
                 th:text="|${item.startDate} ~ ${item.endDate}|">
                2025-01-01 ~ 2025-01-31
            </div>

            <!-- 지역 태그 -->
            <div class="popup-region"
                 th:if="${item.regionName != null}">
                #<span th:text="${item.regionName}">지역</span>
            </div>
        </div>
    </div>
    <nav class="d-flex justify-content-end align-items-center gap-2 mt-3">
        <select class="form-select form-select-sm w-auto"
                onchange="location.href='?page=0&size=' + this.value;">
            <option disabled selected>보기</option>
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="40">40</option>
        </select>
        <a class="btn btn-sm btn-outline-dark d-none"
           th:href="@{'?'(page=0, size=5)}">5</a>
        <a class="btn btn-sm btn-outline-dark d-none"
           th:href="@{'?'(page=0, size=10)}">10</a>
        <a class="btn btn-sm btn-outline-dark d-none"
           th:href="@{'?'(page=0, size=20)}">20</a>
        <a class="btn btn-sm btn-outline-dark d-none"
           th:href="@{'?'(page=0, size=40)}">40</a>
    </nav>
    <div th:with="
        page=${popupList.number},
        last=${popupList.totalPages},
        sort=${popupList.sort},
        size=${param.size}"
         class="my-4 d-flex justify-content-center">
        <nav>
            <ul class="pagination">
                <li class="page-item"
                    th:classappend="${page}==0 ? 'disabled':''">
                    <a th:href="@{'?'(page=0,size=${size})}" class="page-link">start</a>
                </li>
                <li  th:each="i : ${#numbers.sequence(1,last)}"
                     th:classappend="( (${i}-1)==${page}?'active' )"
                     class="page-item">
                    <a th:href="@{'?'(page=(${i}-1), size=${size})}" class="page-link" th:text="${i}" > </a>
                </li>
                <li class="page-item"
                    th:classappend="${page}==(${last}-1) ? 'disabled':''">
                    <a th:href="@{'?'(page=${last}-1,size=${size})}" class="page-link">last</a>
                </li>
            </ul>
        </nav>
    </div>
</div>
</body>
</html>