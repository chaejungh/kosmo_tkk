<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>문의 관리 | 더쿠쿠 관리자</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --admin-bg: #0b1120;
            --admin-card-bg: #ffffff;
            --admin-card-shadow: 0 10px 30px rgba(15, 23, 42, .16);
            --admin-accent: #6366f1;
            --admin-text: #111827;
            --admin-text-soft: #6b7280;
            --border-soft: #e5e7eb;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Malgun Gothic", sans-serif;
            background: #f3f4f6;
            color: var(--admin-text);
        }

        /* 헤더 - 대시보드와 동일 스타일 */
        .admin-header {
            background: var(--admin-bg);
            color: #e5e7eb;
            padding: 14px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .admin-header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .admin-logo {
            font-weight: 700;
            font-size: 18px;
        }

        .admin-header-badge {
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 999px;
            background: rgba(148, 163, 184, .2);
        }

        .admin-header-right {
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .admin-header-right a {
            color: #cbd5f5;
            text-decoration: none;
        }

        .admin-header-right a:hover {
            text-decoration: underline;
        }

        /* 메인 영역 */
        .admin-main {
            padding: 24px 32px 32px;
        }

        .page-title {
            margin-bottom: 20px;
        }

        .page-title h1 {
            margin: 0 0 6px;
            font-size: 22px;
        }

        .page-title p {
            margin: 0;
            font-size: 13px;
            color: var(--admin-text-soft);
        }

        /* 카드 */
        .admin-card {
            background: var(--admin-card-bg);
            border-radius: 16px;
            padding: 16px 18px;
            box-shadow: var(--admin-card-shadow);
            border: 1px solid var(--border-soft);
        }

        /* 상단 툴바 */
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            font-size: 13px;
            color: var(--admin-text-soft);
        }

        .toolbar-left span {
            font-size: 13px;
        }

        .toolbar-right form {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .toolbar-right input[type="text"] {
            padding: 6px 8px;
            border-radius: 999px;
            border: 1px solid var(--border-soft);
            font-size: 13px;
            min-width: 180px;
        }

        .toolbar-right button {
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px solid #d1d5db;
            background: #111827;
            color: #ffffff;
            font-size: 12px;
            cursor: pointer;
        }

        /* 테이블 */
        .admin-table-wrap {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        th, td {
            padding: 8px 10px;
            border-bottom: 1px solid #e5e7eb;
            text-align: left;
            white-space: nowrap;
        }

        th {
            background: #f9fafb;
            font-weight: 600;
            color: #4b5563;
        }

        tr:nth-child(even) td {
            background: #f9fafb;
        }

        a.link {
            color: #2563eb;
            text-decoration: none;
        }

        a.link:hover {
            text-decoration: underline;
        }

        /* 상태 뱃지 */
        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 999px;
            font-size: 11px;
        }

        .badge-wait {
            background: #fee2e2;
            color: #b91c1c;
        }

        .badge-done {
            background: #dcfce7;
            color: #166534;
        }

        /* 페이지네이션 */
        .pagination {
            margin-top: 14px;
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
            font-size: 12px;
        }

        .pagination a,
        .pagination span {
            padding: 4px 8px;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
            text-decoration: none;
            color: #374151;
        }

        .pagination .active {
            background: #111827;
            color: #ffffff;
            border-color: #111827;
        }

        .pagination a:hover {
            border-color: #9ca3af;
        }

        @media (max-width: 640px) {
            .admin-main {
                padding: 18px 14px 28px;
            }
        }
    </style>
</head>
<body>
<header th:replace="admin/fragments/admin_header :: adminHeader"></header>

<main class="admin-main">
    <section class="page-title">
        <h1>문의 관리</h1>
        <p>사용자가 남긴 문의를 조회하고, 답변 상태를 관리합니다.</p>
    </section>

    <section class="admin-card">
        <!-- 상단 툴바 -->
        <div class="toolbar">
            <div class="toolbar-left">
                <span th:text="|총 ${inquiryPage.totalElements}건의 문의|">총 0건의 문의</span>
            </div>
            <div class="toolbar-right">
                <form th:action="@{/admin/inquiries}" method="get">
                    <input type="hidden" name="page" value="0"/>
                    <input type="text"
                           name="keyword"
                           placeholder="제목/내용 검색"
                           th:value="${keyword}">
                    <button type="submit">검색</button>
                </form>
            </div>
        </div>

        <!-- 테이블 -->
        <div class="admin-table-wrap">
            <table>
                <thead>
                <tr>
                    <th style="width: 70px;">번호</th>
                    <th style="width: 120px;">카테고리</th>
                    <th>제목</th>
                    <th style="width: 120px;">작성일</th>
                    <th style="width: 120px;">답변일</th>
                    <th style="width: 100px;">상태</th>
                </tr>
                </thead>
                <tbody>
                <tr th:if="${inquiryPage.content.isEmpty()}">
                    <td colspan="6" style="text-align: center; padding: 16px 0;">
                        등록된 문의가 없습니다.
                    </td>
                </tr>

                <tr th:each="inq : ${inquiryPage.content}">
                    <td th:text="${inq.id}">1</td>
                    <td th:text="${inq.category}">카테고리</td>
                    <td>
                        <a class="link"
                           th:href="@{/admin/inquiries/{id}(id=${inq.id})}"
                           th:text="${inq.title}">
                            문의 제목
                        </a>
                    </td>
                    <td th:text="${inq.createdAt}">2025-12-10</td>
                    <td th:text="${inq.answeredAt}">-</td>
                    <td>
                        <span th:if="${inq.answerContent == null or #strings.isEmpty(inq.answerContent)}"
                              class="badge badge-wait">
                            답변 대기
                        </span>
                        <span th:if="${inq.answerContent != null and !#strings.isEmpty(inq.answerContent)}"
                              class="badge badge-done">
                            답변 완료
                        </span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- 페이지네이션 -->
        <div class="pagination"
             th:if="${inquiryPage.totalPages > 1}">
            <!-- 이전 -->
            <a th:if="${!inquiryPage.first}"
               th:href="@{/admin/inquiries(page=${currentPage - 1}, size=${size}, keyword=${keyword})}">
                &laquo;
            </a>

            <!-- 번호들 -->
            <span th:each="pageNum : ${#numbers.sequence(0, inquiryPage.totalPages - 1)}"
                  th:classappend="${pageNum} == ${currentPage} ? ' active'">
                <a th:if="${pageNum} != ${currentPage}"
                   th:text="${pageNum + 1}"
                   th:href="@{/admin/inquiries(page=${pageNum}, size=${size}, keyword=${keyword})}">
                    1
                </a>
                <span th:if="${pageNum} == ${currentPage}"
                      th:text="${pageNum + 1}">
                    1
                </span>
            </span>

            <!-- 다음 -->
            <a th:if="${!inquiryPage.last}"
               th:href="@{/admin/inquiries(page=${currentPage + 1}, size=${size}, keyword=${keyword})}">
                &raquo;
            </a>
        </div>
    </section>
</main>

</body>
</html>
