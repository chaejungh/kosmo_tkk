<!DOCTYPE html>
<html lang="ko"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{fragments/layout}">
<head>


    <style>
        /* ===== ë§¤ì¥ ìƒì„¸ ì „ìš© ìŠ¤íƒ€ì¼ ===== */

        .store-hero {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .store-hero-main {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        .store-hero-text {
            flex: 2;
            min-width: 0;
        }

        .store-brand {
            display: inline-block;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 999px;
            background: #f3f4ff;
            color: #4f46e5;
            margin-bottom: 6px;
        }

        .store-name {
            font-size: 22px;
            font-weight: 700;
            margin: 0 0 6px 0;
        }

        .store-address {
            font-size: 13px;
            color: #4b5563;
            margin-bottom: 4px;
        }

        .store-tel,
        .store-open {
            font-size: 13px;
            color: #6b7280;
        }

        .store-hero-meta {
            flex: 1.3;
            font-size: 13px;
            border-radius: 12px;
            background: #f9fafb;
            padding: 10px 12px;
            border: 1px solid #e5e7eb;
        }

        .store-meta-row {
            display: flex;
            gap: 6px;
            margin-bottom: 4px;
        }

        .store-meta-label {
            width: 56px;
            flex-shrink: 0;
            font-weight: 600;
            color: #4b5563;
        }

        .store-meta-value {
            flex: 1;
            color: #111827;
            word-break: keep-all;
        }

        .store-meta-link a {
            color: #2563eb;
            text-decoration: none;
            word-break: break-all;
        }

        .store-meta-link a:hover {
            text-decoration: underline;
        }

        .store-map-card p {
            font-size: 13px;
            color: #4b5563;
            margin: 0 0 8px 0;
        }

        .btn-map-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            background: #111827;
            color: #ffffff;
            font-size: 13px;
            text-decoration: none;
        }

        .btn-map-link span.icon {
            font-size: 14px;
        }

        /* ===== êµ¿ì¦ˆ ì¬ê³  ì¡°íšŒ ì „ìš© ìŠ¤íƒ€ì¼ ===== */

        .goods-section {
            margin-top: 16px;
        }

        .goods-search-form {
            margin-bottom: 10px;
        }

        .goods-search-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }

        .goods-search-input-wrap {
            position: relative;
            flex: 1;
            min-width: 0;
        }

        .goods-search-input-wrap input {
            width: 100%;
            padding: 8px 10px 8px 30px;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            font-size: 13px;
            outline: none;
        }

        .goods-search-input-wrap input:focus {
            border-color: #4f46e5;
        }

        .goods-search-input-wrap .search-icon {
            position: absolute;
            left: 9px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 13px;
            color: #9ca3af;
        }

        .goods-search-hint {
            font-size: 11px;
            color: #9ca3af;
        }

        .goods-result-info {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 6px;
        }

        .goods-table-wrap {
            width: 100%;
            overflow-x: auto;
        }

        .goods-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            min-width: 640px;
        }

        .goods-table th,
        .goods-table td {
            padding: 8px 10px;
            border-bottom: 1px solid #e5e7eb;
            white-space: nowrap;
        }

        .goods-table th {
            background: #f9fafb;
            text-align: left;
            color: #4b5563;
            font-weight: 600;
        }

        .goods-table td {
            color: #111827;
        }

        .goods-thumb {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            object-fit: cover;
            border: 1px solid #e5e7eb;
        }

        .goods-empty {
            padding: 16px 0;
            text-align: center;
            font-size: 13px;
            color: #9ca3af;
        }

        @media (max-width: 768px) {
            .store-hero-main {
                flex-direction: column;
            }

            .store-hero-meta {
                width: 100%;
            }

            .store-name {
                font-size: 19px;
            }

            .goods-table {
                font-size: 12px;
                min-width: 520px;
            }
        }
    </style>
</head>
<body>
<div layout:fragment="content">
    <!-- âœ… ê° í˜ì´ì§€ì—ì„œ ì´ fragment ë¥¼ ì±„ì›Œë„£ìŒ -->
    <main>

        <!-- ë§¤ì¥ ê¸°ë³¸ ì •ë³´ -->
        <section class="card store-hero">
            <div class="card-header">
                <div class="card-title">
                    <span>ë§¤ì¥ ìƒì„¸ ì •ë³´</span>
                    <span class="pill pill-purple">STORE</span>
                </div>
            </div>

            <div class="store-hero-main">
                <!-- ì™¼ìª½ : ë§¤ì¥ ì œëª©/ì£¼ì†Œ -->
                <div class="store-hero-text">
                    <span class="store-brand"
                          th:text="${store.brand != null and !#strings.isEmpty(store.brand) ? store.brand : 'ë¸Œëœë“œ'}">
                        ë¸Œëœë“œ
                    </span>

                    <h1 class="store-name"
                        th:text="${store.name != null and !#strings.isEmpty(store.name) ? store.name : 'ë§¤ì¥ ì´ë¦„'}">
                        ë§¤ì¥ ì´ë¦„
                    </h1>

                    <p class="store-address"
                       th:text="${store.address != null and !#strings.isEmpty(store.address) ? store.address : 'ì£¼ì†Œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.'}">
                        ì„œìš¸ ì–´ë”˜ê°€ 00ë¡œ 00
                    </p>

                    <p class="store-tel"
                       th:text="${store.tel != null and !#strings.isEmpty(store.tel) ? 'ì „í™”ë²ˆí˜¸ Â· ' + store.tel : 'ì „í™”ë²ˆí˜¸ ì •ë³´ ì—†ìŒ'}">
                        ì „í™”ë²ˆí˜¸ Â· 02-000-0000
                    </p>

                    <p class="store-open"
                       th:text="${store.openTime != null and !#strings.isEmpty(store.openTime) ? 'ì˜ì—…ì‹œê°„ Â· ' + store.openTime : 'ì˜ì—…ì‹œê°„ ì •ë³´ ì—†ìŒ'}">
                        ì˜ì—…ì‹œê°„ Â· 11:00 ~ 21:00
                    </p>
                </div>

                <!-- ì˜¤ë¥¸ìª½ : ìš”ì•½ ë©”íƒ€ ë°•ìŠ¤ -->
                <aside class="store-hero-meta">
                    <div class="store-meta-row">
                        <span class="store-meta-label">ë§¤ì¥ID</span>
                        <span class="store-meta-value" th:text="${store.id}">172</span>
                    </div>

                    <div class="store-meta-row">
                        <span class="store-meta-label">ì£¼ì†Œ</span>
                        <span class="store-meta-value"
                              th:text="${store.address != null && !#strings.isEmpty(store.address) ? store.address : 'ì •ë³´ ì—†ìŒ'}">
                            ì„œìš¸ ì–´ë”˜ê°€ 00ë¡œ 00
                        </span>
                    </div>

                    <div class="store-meta-row">
                        <span class="store-meta-label">ì—°ë½ì²˜</span>
                        <span class="store-meta-value"
                              th:text="${store.tel != null && !#strings.isEmpty(store.tel) ? store.tel : 'ì •ë³´ ì—†ìŒ'}">
                            02-000-0000
                        </span>
                    </div>

                    <div class="store-meta-row">
                        <span class="store-meta-label">ì˜ì—…ì‹œê°„</span>
                        <span class="store-meta-value"
                              th:text="${store.openTime != null && !#strings.isEmpty(store.openTime) ? store.openTime : 'ì •ë³´ ì—†ìŒ'}">
                            11:00 ~ 21:00
                        </span>
                    </div>

                    <div class="store-meta-row store-meta-link">
                        <span class="store-meta-label">í™ˆí˜ì´ì§€</span>
                        <span class="store-meta-value">
                            <a th:if="${store.homepage != null && !#strings.isEmpty(store.homepage)}"
                               th:href="${store.homepage}" target="_blank"
                               th:text="${store.homepage}">https://example.com</a>
                            <span th:if="${store.homepage == null || #strings.isEmpty(store.homepage)}">
                                ì •ë³´ ì—†ìŒ
                            </span>
                        </span>
                    </div>
                </aside>
            </div>
        </section>

        <!-- ë„¤ì´ë²„ ì§€ë„ / ê¸¸ì°¾ê¸° ì•ˆë‚´ -->
        <section class="card store-map-card">
            <div class="card-header">
                <div class="card-title">
                    <span>ë„¤ì´ë²„ ì§€ë„ì—ì„œ ë³´ê¸°</span>
                    <span class="pill pill-blue">MAP</span>
                </div>
            </div>

            <div class="card-body">
                <p>
                    ì •í™•í•œ ìœ„ì¹˜ ì•ˆë‚´ëŠ” ë„¤ì´ë²„ ì§€ë„ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
                    ì•„ë˜ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´
                    <span th:text="${store.name != null && !#strings.isEmpty(store.name) ? store.name : 'ë§¤ì¥'}">ë§¤ì¥</span>
                    ì„(ë¥¼) ë„¤ì´ë²„ ì§€ë„ì—ì„œ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.
                </p>

                <!-- ë§¤ì¥ ì´ë¦„ ê¸°ì¤€ ê²€ìƒ‰ ë”¥ë§í¬ -->
                <a class="btn-map-link"
                   th:href="@{|https://map.naver.com/p/search/${store.name}|}"
                   target="_blank">
                    <span class="icon">ğŸ—ºï¸</span>
                    <span>ë„¤ì´ë²„ ì§€ë„ì—ì„œ ê¸¸ì°¾ê¸°</span>
                </a>

                <p style="margin-top:8px;font-size:12px;color:#9ca3af;">
                    * ì¢Œí‘œ(latitude/longitude)ê°€ ì¤€ë¹„ë˜ë©´, ì´ ì˜ì—­ì— ì‹¤ì œ ì§€ë„ë¥¼ ì§ì ‘ ë„ìš°ëŠ” ê²ƒë„ ê°€ëŠ¥í•´ìš”.
                </p>
            </div>
        </section>

        <!-- ğŸ”¥ ë§¤ì¥ êµ¿ì¦ˆ ì¬ê³  ì¡°íšŒ ì„¹ì…˜ -->
        <section class="card goods-section" th:if="${goodsList != null}">
            <div class="card-header">
                <div class="card-title">
                    <span>ë§¤ì¥ ë‚´ êµ¿ì¦ˆ ì¬ê³  ì¡°íšŒ</span>
                    <span class="pill pill-green">GOODS</span>
                </div>
            </div>

            <div class="card-body">
                <!-- ê²€ìƒ‰ í¼ -->
                <form class="goods-search-form"
                      th:action="@{/goods/store/{storeId}(storeId=${storeId})}"
                      method="get">
                    <div class="goods-search-bar">
                        <div class="goods-search-input-wrap">
                            <span class="search-icon">ğŸ”</span>
                            <input type="text"
                                   name="keyword"
                                   placeholder="ì‘í’ˆëª… / ìºë¦­í„°ëª… / ìƒí’ˆëª…ìœ¼ë¡œ ê²€ìƒ‰ (ì˜ˆ: ì£¼ìˆ íšŒì „, ë£¨í”¼, ì•„í¬ë¦´ìŠ¤íƒ ë“œ)"
                                   th:value="${keyword}">
                        </div>
                        <button type="submit" class="btn-primary btn-sm">
                            ê²€ìƒ‰
                        </button>
                    </div>
                </form>

                <div class="goods-search-hint">
                    * ì˜ˆì‹œ : <b>ì›í”¼ìŠ¤</b>, <b>ë‚˜ë£¨í† </b>, <b>ì£¼ìˆ íšŒì „</b>, <b>ë£¨í”¼</b>, <b>íƒ„ì§€ë¡œ</b>, <b>ì•„í¬ë¦´ìŠ¤íƒ ë“œ</b> ë“±
                </div>

                <div class="goods-result-info"
                     th:if="${goodsList != null}">
                    <span th:if="${#lists.isEmpty(goodsList)}">
                        ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
                    </span>
                    <span th:if="${!#lists.isEmpty(goodsList)}">
                        ì´ <b th:text="${#lists.size(goodsList)}">0</b>ê°œì˜ ìƒí’ˆì´ ìˆìŠµë‹ˆë‹¤.
                    </span>
                </div>

                <!-- êµ¿ì¦ˆ í…Œì´ë¸” -->
                <div class="goods-table-wrap" th:if="${!#lists.isEmpty(goodsList)}">
                    <table class="goods-table">
                        <thead>
                        <tr>
                            <th>ì´ë¯¸ì§€</th>
                            <th>ì‘í’ˆëª…</th>
                            <th>ìºë¦­í„°</th>
                            <th>ìƒí’ˆëª…</th>
                            <th>ì¹´í…Œê³ ë¦¬</th>
                            <th>ê°€ê²©</th>
                            <th>ì¬ê³ </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="g : ${goodsList}">
                            <td>
                                <img th:if="${g.thumbnailUrl != null}"
                                     th:src="${g.thumbnailUrl}"
                                     alt="êµ¿ì¦ˆ ì¸ë„¤ì¼"
                                     class="goods-thumb">
                                <span th:if="${g.thumbnailUrl == null}"
                                      style="font-size:11px;color:#9ca3af;">
                                    ì´ë¯¸ì§€ ì—†ìŒ
                                </span>
                            </td>
                            <td th:text="${g.workName}">ì£¼ìˆ íšŒì „</td>
                            <td th:text="${g.characterName}">ì´íƒ€ë„ë¦¬ ìœ ìš°ì§€</td>
                            <td th:text="${g.name}">êµ¿ì¦ˆ ìƒí’ˆëª…</td>
                            <td th:text="${g.category}">ì•„í¬ë¦´ìŠ¤íƒ ë“œ</td>
                            <td th:text="${g.price != null ? g.price + 'ì›' : '-'}">10,000ì›</td>
                            <td th:text="${g.stockQty != null ? g.stockQty + 'ê°œ' : '-'}">5ê°œ</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <div class="goods-empty"
                     th:if="${#lists.isEmpty(goodsList)}">
                    ì´ ë§¤ì¥ì— ë“±ë¡ëœ êµ¿ì¦ˆê°€ ì—†ê±°ë‚˜, ê²€ìƒ‰ ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.
                </div>
            </div>
        </section>

    </main>
</div>
</body>
</html>
