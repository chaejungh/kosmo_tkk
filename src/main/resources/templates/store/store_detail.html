<!DOCTYPE html>
<html lang="ko"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{fragments/tkk_fragment/layout}">

<head>
    <th:block layout:fragment="head">
        <style>
            .sd-page{width:min(1200px,92%);margin:0 auto;padding:20px 0 60px}
            .sd-hero{height:420px;border-radius:18px;overflow:hidden;position:relative;
                border:1px solid #e5e7eb;box-shadow:0 14px 40px rgba(0,0,0,.12)}
            .sd-hero-bg{position:absolute;inset:0;background-size:cover;background-position:center}
            .sd-hero-fallback{position:absolute;inset:0;display:grid;place-items:center;
                background:#f3f4f6;font-weight:900;color:#64748b}

            .sd-grid{margin-top:24px;display:grid;grid-template-columns:1fr 360px;gap:24px}
            .sd-card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;
                box-shadow:0 10px 26px rgba(0,0,0,.06);padding:18px;margin-bottom:18px}

            .sd-name{font-size:22px;font-weight:900;margin-bottom:6px}
            .sd-sub{font-size:13px;color:#475569}

            .sd-infoRow{display:flex;gap:10px;margin-bottom:10px}
            .sd-label{font-size:12px;color:#64748b;font-weight:800}
            .sd-value{font-size:13px;font-weight:900;color:#0f172a}

            .goods-table{width:100%;border-collapse:collapse;font-size:13px}
            .goods-table th,.goods-table td{padding:10px;border-bottom:1px solid #e5e7eb}
            .goods-thumb{width:48px;height:48px;border-radius:10px;object-fit:cover}
        </style>
    </th:block>
</head>

<body>
<div layout:fragment="content">
    <main class="sd-page">

        <!-- HERO -->
        <section class="sd-hero">
            <div class="sd-hero-bg"
                 th:if="${store['imageUrl'] != null and !#strings.isEmpty(store['imageUrl'])}"
                 th:style="|background-image:url('${store['imageUrl']}');|"></div>

            <div class="sd-hero-bg"
                 th:if="${(store['imageUrl'] == null or #strings.isEmpty(store['imageUrl']))
                         and goodsList != null and !#lists.isEmpty(goodsList)
                         and goodsList[0].thumbnailUrl != null}"
                 th:style="|background-image:url('${goodsList[0].thumbnailUrl}');|"></div>

            <div class="sd-hero-fallback"
                 th:if="${store['imageUrl'] == null or #strings.isEmpty(store['imageUrl'])}">
                ë§¤ì¥ ëŒ€í‘œ ì´ë¯¸ì§€
            </div>
        </section>

        <section class="sd-grid">

            <!-- LEFT -->
            <div>

                <div class="sd-card">
                    <h1 class="sd-name" th:text="${store['name']}">ë§¤ì¥ëª…</h1>
                    <p class="sd-sub" th:text="${store['address']}">ì£¼ì†Œ</p>
                </div>

                <div class="sd-card">
                    <div class="sd-infoRow">
                        <div>ğŸ“</div>
                        <div>
                            <div class="sd-label">ì „í™”ë²ˆí˜¸</div>
                            <div class="sd-value" th:text="${store['tel']}">-</div>
                        </div>
                    </div>

                    <div class="sd-infoRow">
                        <div>ğŸ•’</div>
                        <div>
                            <div class="sd-label">ì˜ì—…ì‹œê°„</div>
                            <div class="sd-value" th:text="${store['openTime']}">-</div>
                        </div>
                    </div>
                </div>

                <!-- GOODS -->
                <div class="sd-card">
                    <h3>êµ¿ì¦ˆ ì¬ê³ </h3>

                    <table class="goods-table" th:if="${!#lists.isEmpty(goodsList)}">
                        <thead>
                        <tr>
                            <th>ì´ë¯¸ì§€</th>
                            <th>ìƒí’ˆëª…</th>
                            <th>ê°€ê²©</th>
                            <th>ì¬ê³ </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="g : ${goodsList}">
                            <td>
                                <img class="goods-thumb"
                                     th:if="${g.thumbnailUrl != null}"
                                     th:src="${g.thumbnailUrl}">
                            </td>
                            <td th:text="${g.name}">ìƒí’ˆ</td>
                            <td th:text="${g.price}">0</td>
                            <td th:text="${g.stockQty}">0</td>
                        </tr>
                        </tbody>
                    </table>

                    <div th:if="${#lists.isEmpty(goodsList)}">êµ¿ì¦ˆ ì—†ìŒ</div>
                </div>

            </div>

            <!-- RIGHT -->
            <aside>
                <div class="sd-card">
                    <h3>ì‹¤ì‹œê°„ ì¬ê³  ìš”ì•½</h3>
                    <div th:each="g,stat : ${goodsList}" th:if="${stat.index < 5}">
                        <b th:text="${g.name}">ìƒí’ˆ</b> :
                        <span th:text="${g.stockQty}">0</span>ê°œ
                    </div>
                </div>
            </aside>

        </section>
    </main>
</div>
</body>
</html>