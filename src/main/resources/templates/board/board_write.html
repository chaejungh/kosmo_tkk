<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/fragments/layout}">

<head>
    <th:block layout:fragment="head">
        <meta charset="UTF-8">
        <title>덕질게시판 글쓰기 | 더쿠쿠</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <style>
            :root{
                --bg:#f4f5f7; --card:#fff; --text:#111827; --sub:#6b7280;
                --border:#e5e7eb; --accent:#ff6b86; --purple:#6366f1;
                --shadow:0 10px 30px rgba(17,24,39,.08); --radius:18px;
            }
            .board-write-wrap{max-width:920px;margin:0 auto;padding:12px 16px 90px;}
            .bw-head{
                background:linear-gradient(135deg, rgba(255,107,134,.16), rgba(99,102,241,.14));
                border:1px solid rgba(229,231,235,.9); border-radius:22px;
                box-shadow:var(--shadow); padding:18px; margin:6px 0 14px;
            }
            .bw-title{margin:0;font-size:20px;font-weight:900;color:var(--text);}
            .bw-sub{margin:6px 0 0;font-size:13px;color:var(--sub);}
            .bw-card{
                background:var(--card); border:1px solid var(--border);
                border-radius:22px; box-shadow:var(--shadow); overflow:hidden;
            }
            .bw-inner{padding:16px;}
            .field{
                border:1px solid var(--border); border-radius:18px;
                padding:14px; background:#fff; margin-bottom:14px;
            }
            .field label{
                display:flex;align-items:center;gap:8px;
                font-size:13px;font-weight:900;color:var(--text);margin-bottom:10px;
            }
            .req{
                font-size:11px;padding:4px 8px;border-radius:999px;
                background:rgba(255,107,134,.14);border:1px solid rgba(255,107,134,.22);
                color:var(--text);font-weight:900;
            }
            .field input,.field select,.field textarea{
                width:100%; border:1px solid var(--border); border-radius:14px;
                padding:12px; font-size:13px; outline:none; background:#fff; color:var(--text);
            }
            .field textarea{min-height:220px;resize:vertical;line-height:1.6;}
            .field input:focus,.field select:focus,.field textarea:focus{
                border-color:rgba(99,102,241,.55);
                box-shadow:0 0 0 3px rgba(99,102,241,.12);
            }
            .error{
                margin-top:8px; color:#ef4444; font-size:12px; font-weight:800;
            }
            .hint{margin-top:8px;color:var(--sub);font-size:12px;}
            .bw-bottom{position:sticky;bottom:0;margin-top:14px;padding:12px 0 0;}
            .bw-bottom-bar{
                background:rgba(255,255,255,.86); backdrop-filter:blur(10px);
                border:1px solid var(--border); border-radius:18px; box-shadow:var(--shadow);
                padding:12px; display:flex; gap:10px; align-items:center; justify-content:space-between;
            }
            .bw-submit{
                height:40px;padding:0 14px;border-radius:14px;border:none;
                background:linear-gradient(135deg, var(--accent), var(--purple));
                color:#fff;font-weight:900;cursor:pointer;white-space:nowrap;
                box-shadow:0 12px 26px rgba(99,102,241,.18);
            }
            .bw-cancel{
                height:40px;padding:0 14px;border-radius:14px;
                border:1px solid var(--border);background:#fff;color:var(--text);
                font-weight:900;cursor:pointer;white-space:nowrap;text-decoration:none;
                display:inline-flex;align-items:center;justify-content:center;
            }
        </style>
    </th:block>
</head>

<body>
<div layout:fragment="content">

    <div class="board-write-wrap">

        <!-- 세션 없으면 폼 자체 숨김(필요하면 유지/수정 가능) -->
        <div th:if="${session.memberId == null}"
             style="background:#fff;border:1px solid var(--border);border-radius:18px;padding:14px;color:#111827;margin:10px 0;">
            ⚠️ 로그인 후 이용해주세요.
        </div>

        <div class="bw-head">
            <h1 class="bw-title">덕질게시판 글쓰기</h1>
            <p class="bw-sub">제목/카테고리/내용만 깔끔하게 쓰면 끝!</p>
        </div>

        <div class="bw-card" th:if="${session.memberId != null}">
            <div class="bw-inner">

                <!-- action은 너 컨트롤러 경로에 맞춰 수정 -->
                <form th:action="@{/board/write.do}"
                      th:object="${boardWriteValid}"
                      method="post">

                    <!-- 카테고리 -->
                    <div class="field">
                        <label>카테고리 <span class="req">필수</span></label>
                        <select th:field="*{categoryId}" required>
                            <!-- 1~3만 선택되게 -->
                            <option value="" disabled selected>선택하세요</option>
                            <option value="1">내 새끼 자랑</option>
                            <option value="2">코스프레</option>
                            <option value="3">자유</option>
                        </select>

                        <div class="error"
                             th:if="${#fields.hasErrors('categoryId')}"
                             th:errors="*{categoryId}">카테고리 에러</div>
                        <div class="hint">카테고리는 1~3만 허용(@Min 1, @Max 3)</div>
                    </div>

                    <!-- 제목 -->
                    <div class="field">
                        <label>제목 <span class="req">필수</span></label>
                        <input type="text" th:field="*{title}" placeholder="제목을 입력하세요" required>
                        <div class="error"
                             th:if="${#fields.hasErrors('title')}"
                             th:errors="*{title}">제목 에러</div>
                    </div>

                    <!-- 내용 -->
                    <div class="field">
                        <label>내용 <span class="req">필수</span></label>
                        <textarea th:field="*{content}" placeholder="내용을 입력하세요" required></textarea>
                        <div class="error"
                             th:if="${#fields.hasErrors('content')}"
                             th:errors="*{content}">내용 에러</div>
                    </div>

                    <div class="bw-bottom">
                        <div class="bw-bottom-bar">
                            <!-- 목록 경로는 너 프로젝트 경로로 수정 -->
                            <a class="bw-cancel" th:href="@{/board/list.do}">↩ 목록으로</a>
                            <button class="bw-submit" type="submit">✅ 등록하기</button>
                        </div>
                    </div>

                </form>

            </div>
        </div>

    </div>

</div>
</body>
</html>
