<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>더쿠쿠 - 덕질게시판</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" th:href="@{/css/home.css}">
    <link rel="stylesheet" th:href="@{/css/board.css}">

    <style>
        /* PC 전용 글쓰기 버튼 (오른쪽 정렬) */
        .desktop-write-btn {
            display: flex;
            justify-content: flex-end;
            margin-top: 10px;
        }

        /* 모바일에서 PC 버튼 숨김 */
        @media (max-width: 768px) {
            .desktop-write-btn {
                display: none;
            }
        }

        /* 모바일 전용 플로팅 버튼 */
        .floating-write-btn {
            position: fixed;
            right: 20px;
            bottom: 85px;
            width: 58px;
            height: 58px;
            border-radius: 50%;
            background: #6C4CF7;
            color: white;
            border: none;
            font-size: 34px;
            line-height: 58px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 999;
            cursor: pointer;
        }

        /* 정렬 아이콘 3개 묶음 */
        .search-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;   /* 🔥 이 박스를 기준으로 메뉴가 떠 */
        }

        /* 정렬 메뉴(최신순/인기순) - 버튼 바로 아래에 뜨게 */
        .sort-menu {
            position: absolute;
            right: 0;
            top: calc(100% + 6px);   /* 🔥 버튼 줄 아래로 살짝 띄우기 */
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            padding: 6px 0;
            min-width: 90px;
            z-index: 10;
        }

        .sort-menu.hidden {
            display: none;
        }

        .sort-menu .sort-option {
            padding: 8px 14px;
            font-size: 13px;
            cursor: pointer;
            white-space: nowrap;
        }

        .sort-menu .sort-option:hover {
            background: #f5f5f5;
        }

        .sort-menu .sort-option.active {
            background: #eee;
            font-weight: 700;
        }

        /* PC 환경에서는 플로팅 버튼 숨김 */
        @media (min-width: 769px) {
            .floating-write-btn {
                display: none;
            }
        }
    </style>
</head>
<body>

<div class="page">

    <header class="header">
        <div class="header-top">
            <a th:href="@{/}" class="logo">더쿠쿠</a>
        </div>
    </header>

    <main class="content">

        <section class="card board-header-card">
            <div class="card-header">
                <div class="card-title">
                    <span>덕질게시판</span>
                    <span class="pill pill-purple">COMMUNITY</span>
                </div>
            </div>

            <div class="segmented-control">
                <button class="seg-btn active">내 새끼 자랑</button>
                <button class="seg-btn">코스프레</button>
                <button class="seg-btn">자유게시판</button>
            </div>

            <div class="board-search-row">

                <div class="board-search-box">
                    <input type="text" placeholder="통합 검색 (제목, 닉네임, 태그)">
                    <span class="board-search-icon">🔍</span>
                </div>

                <!-- ▶▶ 아이콘 기능 추가된 부분 ◀◀ -->
                <div class="search-actions">
                    <button id="viewListBtn" class="icon-btn active">☰</button>
                    <button id="viewPhotoBtn" class="icon-btn">▢</button>
                    <button id="sortBtn" class="icon-btn">⇅</button>

                    <!-- 🔥 정렬 메뉴를 search-actions 안으로 이동 -->
                    <div id="sortMenu" class="sort-menu hidden">
                        <div class="sort-option active" data-sort="latest">최신순</div>
                        <div class="sort-option" data-sort="popular">인기순</div>
                    </div>
                </div>




            <!-- PC에서는 오른쪽 끝에 -->
            <div class="desktop-write-btn">
                <button class="btn-primary btn-sm"
                        th:onclick="|location.href='@{/board/write}'|">
                    + 글쓰기
                </button>
            </div>
        </section>

        <!-- 게시글 리스트 (원본 그대로) -->
        <!-- 절대 수정 안 했음 -->

        <!-- ===== 게시글 리스트 카드 ===== -->
        <section class="card">
            <ul class="post-list" id="postList">

                <!-- 샘플 1 -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">오늘 영업당한 내 최애 포카 자랑합니다 🥹</h3>
                            <p class="post-excerpt">오늘 영업당한 내 최애 포카 자랑 글이에요...</p>
                            <p class="post-tag">#주술회전 #고죠사토루 #포카</p>
                            <p class="post-meta-top">닉네임 · 3분 전</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">❤️108 · 💬23 · 👀1,024</div>
                            <div>내 새끼 자랑</div>
                        </div>
                    </div>
                </li>

                <!-- 샘플 2 -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">첫 굿즈 교환 성공기… 우리애 실물 미쳤다</h3>
                            <p class="post-excerpt">굿즈 교환 후기 남겨요! 실물샷도 같이 올립니다.</p>
                            <p class="post-tag">#굿즈교환 #블루록 #실물</p>
                            <p class="post-meta-top">덕쿠쿠짱 · 10분 전</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">❤️52 · 💬4 · 👀312</div>
                            <div>내 새끼 자랑</div>
                        </div>
                    </div>
                </li>

                <!-- 샘플 3 -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">오늘 영업당한 내 최애 포카 자랑합니다 🥹</h3>
                            <p class="post-excerpt">오늘 영업당한 내 최애 포카 자랑 글이에요...</p>
                            <p class="post-tag">#주술회전 #고죠사토루 #포카</p>
                            <p class="post-meta-top">닉네임 · 8분 전</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">❤️95 · 💬12 · 👀842</div>
                            <div>내 새끼 자랑</div>
                        </div>
                    </div>
                </li>

                <!-- 샘플 4 -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">굿즈 정리하다가 발견한 레전드 포카 😳</h3>
                            <p class="post-excerpt">정리하다가 발견했는데 너무 예뻐서 올려요…</p>
                            <p class="post-tag">#귀멸의칼날 #렌고쿠 #레어포카</p>
                            <p class="post-meta-top">포카러버 · 20분 전</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">❤️67 · 💬3 · 👀501</div>
                            <div>내 새끼 자랑</div>
                        </div>
                    </div>
                </li>

                <!-- 샘플 5 -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">최애 굿즈 도착해서 난리났다 😭💜</h3>
                            <p class="post-excerpt">오늘 배송 왔는데 실물이 훨씬 예뻐요…</p>
                            <p class="post-tag">#하이큐 #히나타 #굿즈개봉기</p>
                            <p class="post-meta-top">히나타최애 · 35분 전</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">❤️82 · 💬7 · 👀712</div>
                            <div>내 새끼 자랑</div>
                        </div>
                    </div>
                </li>

                <!-- 샘플 6 -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">드디어 구했다… 이 포카 구하기 너무 힘들었다 😭</h3>
                            <p class="post-excerpt">너무 갖고 싶었던 포카라서 진짜 감격…</p>
                            <p class="post-tag">#블루록 #이사기요 #레어포카</p>
                            <p class="post-meta-top">피스키퍼 · 1시간 전</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">❤️143 · 💬18 · 👀1,450</div>
                            <div>내 새끼 자랑</div>
                        </div>
                    </div>
                </li>

            </ul>
        </section>

    </main>
</div>

<!-- ===== 하단 네비게이션 ===== -->
<nav class="bottom-nav">
    <a th:href="@{/}" class="nav-item">
        <span class="icon">🏠</span>
        <span>홈</span>
    </a>
    <a th:href="@{/board}" class="nav-item active">
        <span class="icon">📁</span>
        <span>덕질게시판</span>
    </a>
    <a th:href="@{/trade}" class="nav-item">
        <span class="icon">💸</span>
        <span>굿즈거래</span>
    </a>
    <a th:href="@{/mypage}" class="nav-item">
        <span class="icon">👤</span>
        <span>내정보</span>
    </a>
</nav>
<!-- 모바일 전용 플로팅 버튼 -->
<button class="floating-write-btn" onclick="location.href='/board/write'">＋</button>

<script>
    const postList = document.getElementById("postList");
    const viewListBtn = document.getElementById("viewListBtn");
    const viewPhotoBtn = document.getElementById("viewPhotoBtn");

    /* 리스트 보기 */
    viewListBtn.onclick = () => {
        postList.classList.remove("photo-view");
        viewListBtn.classList.add("active");
        viewPhotoBtn.classList.remove("active");
    };

    /* 사진 보기 */
    viewPhotoBtn.onclick = () => {
        postList.classList.add("photo-view");
        viewPhotoBtn.classList.add("active");
        viewListBtn.classList.remove("active");
    };

    /* ===== 정렬 메뉴 기능 ===== */
    const sortBtn = document.getElementById("sortBtn");      // 아이콘 버튼
    const sortMenu = document.getElementById("sortMenu");    // 메뉴 박스
    const sortOptions = document.querySelectorAll(".sort-option");

    // 정렬 버튼 클릭 → 메뉴 열기/닫기
    sortBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        sortMenu.classList.toggle("hidden");
    });

    // 정렬 옵션 클릭 → 메뉴 닫기 + 적용
    sortOptions.forEach(option => {
        option.addEventListener("click", () => {
            sortOptions.forEach(o => o.classList.remove("active"));
            option.classList.add("active");

            sortMenu.classList.add("hidden");

            console.log("정렬:", option.dataset.sort);
        });
    });

    // 화면 클릭하면 닫힘
    document.addEventListener("click", () => {
        sortMenu.classList.add("hidden");
    });
</script>
</body>
</html>