<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ë•ì§ˆ ê²Œì‹œíŒ</title>

    <!-- âœ… ë‹¤ë¥¸ í˜ì´ì§€ë‘ ë˜‘ê°™ì´: home.cssë§Œ ì‚¬ìš© -->
    <link rel="stylesheet" th:href="@{/css/home.css}">

    <style>

        /* ============================
           ê²€ìƒ‰ì¤„ + ì•„ì´ì½˜ ì„¸íŠ¸
        ============================ */
        .board-search-row {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            position: relative;
        }

        .board-search-box {
            flex: 1.5; /* ê²€ìƒ‰ì°½ ë„“ê²Œ */
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            border-radius: 999px;
            background: #fff;
            border: 1px solid #e5e7eb;
            font-size: 14px;
        }
        .board-search-box input {
            border: none;
            outline: none;
            flex: 1;
            background: transparent;
        }
        .board-search-icon {
            font-size: 16px;
        }

        .search-actions {
            display: flex;
            gap: 6px;
            flex-shrink: 0;
        }

        /* ì•„ì´ì½˜ ë²„íŠ¼ (ê¸€/ì´ë¯¸ì§€/ì •ë ¬) */
        .icon-btn {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            background: #fff;
            font-size: 13px;
            cursor: pointer;
            color: #6b7280;
        }
        .icon-btn.active {
            border-color: #2563eb;
            color: #2563eb;
        }

        /* ============================
           ì •ë ¬ ë©”ë‰´ (ì•„ì´ì½˜ í´ë¦­ ì‹œë§Œ)
        ============================ */
        .sort-menu {
            position: absolute;
            right: 0;
            top: 48px;
            background: #ffffff;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            padding: 6px;
            min-width: 130px;
            z-index: 50;
        }
        .sort-menu.hidden { display: none; }
        .sort-option {
            padding: 6px 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .sort-option:hover { background: #f3f4f6; }
        .sort-option.active {
            background: #eff6ff;
            color: #2563eb;
            font-weight: 600;
        }

        /* ============================
           ê²Œì‹œê¸€ ì¹´ë“œ
        ============================ */
        .post-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 12px;
            /* â˜… í•˜ë‹¨ë°” / í”Œë¡œíŒ… ë²„íŠ¼ì— ì•ˆ ê°€ë¦¬ë„ë¡ ì—¬ìœ  */
            padding-bottom: 120px;
        }
        .post-card {
            display: flex;
            align-items: flex-start;   /* â˜… ì´ë¯¸ì§€ê°€ ì„¸ë¡œë¡œ ëŠ˜ì–´ë‚˜ì§€ ì•Šë„ë¡ */
            gap: 12px;
            padding: 12px;
            border-radius: 14px;
            background: #fff;
            border: 1px solid #e5e7eb;
            min-height: 110px;
        }
        .post-excerpt {
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        .post-thumb-box {
            flex: 0 0 80px;            /* â˜… í­/ë†’ì´ ê³ ì • */
            width: 80px;
            height: 80px;
            border-radius: 10px;
            background: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: #6b7280;
            overflow: hidden;
        }
        .post-thumb-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .post-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .post-title {
            font-size: 15px;
            font-weight: 700;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .post-excerpt {
            margin: 4px 0 0;
            font-size: 13px;
            color: #6b7280;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .post-tag {
            margin-top: 2px;
            font-size: 11px;
            color: #4b5563;
        }
        .post-meta-top {
            margin-top: 4px;
            font-size: 12px;
            color: #9ca3af;
        }
        .post-meta-bottom {
            margin-top: 6px;
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #9ca3af;
        }
        .post-stats { display: flex; gap: 8px; }

        /* ì‚¬ì§„ ë³´ê¸° ëª¨ë“œ */
        .post-list.photo-view {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 12px;
            padding-bottom: 120px;
        }
        .post-card:last-child {
            margin-bottom: 20px;   /* â˜… ë§ˆì§€ë§‰ ê¸€ì´ ë¶™ì–´ì„œ ê°€ë ¤ì§€ë˜ ë¬¸ì œ í•´ê²° */
        }
        .post-list.photo-view .post-card {
            flex-direction: column;
        }
        .post-list.photo-view .post-thumb-box {
            flex: 0 0 150px;
            width: 100%;
            height: 150px;
        }
        .post-list.photo-view .post-title {
            white-space: normal;
        }

        /* ============================
           í”Œë¡œíŒ… ê¸€ì“°ê¸° ë²„íŠ¼ (ëª¨ë°”ì¼)
        ============================ */
        .write-fab {
            position: fixed;
            right: 16px;
            bottom: calc(env(safe-area-inset-bottom) + 70px);
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #2563eb;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
            border: none;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.35);
            cursor: pointer;
            z-index: 60;
            transition: 0.15s;
        }
        .write-fab:active { transform: scale(0.92); }

        /* ë°ìŠ¤í¬íƒ‘ìš© ìƒë‹¨ ê¸€ì“°ê¸° ë²„íŠ¼ */
        .desktop-write-btn { display: none; }

        @media (min-width: 1024px) {
            .write-fab { display: none; }
            .desktop-write-btn {
                display: flex;
                justify-content: flex-end;
                margin-top: 12px;
            }
        }

        /* ë¦¬ìŠ¤íŠ¸ ì¹´ë“œê°€ í•˜ë‹¨ë°”ì— ì•ˆ ê°€ë ¤ì§€ê²Œ ì—¬ìœ  */
        .card:last-of-type {
            margin-bottom: 80px;
        }
    </style>
</head>

<body>

<div class="app-shell">


    <!-- ìƒë‹¨ ë¡œê³  -->
    <header class="header">
        <div class="header-top">
            <a th:href="@{/}" class="logo">ë”ì¿ ì¿ </a>
        </div>
    </header>

    <main class="content">

        <!-- ===== ë•ì§ˆê²Œì‹œíŒ í—¤ë” ì¹´ë“œ ===== -->
        <section class="card board-header-card">
            <div class="card-header">
                <div class="card-title">
                    <span>ë•ì§ˆê²Œì‹œíŒ</span>
                    <span class="pill pill-purple">COMMUNITY</span>
                </div>
            </div>

            <!-- ì¹´í…Œê³ ë¦¬ íƒ­ -->
            <div class="segmented-control">
                <button class="seg-btn active">ë‚´ ìƒˆë¼ ìë‘</button>
                <button class="seg-btn">ì½”ìŠ¤í”„ë ˆ</button>
                <button class="seg-btn">ììœ ê²Œì‹œíŒ</button>
            </div>

            <!-- ê²€ìƒ‰ + ì•„ì´ì½˜ ì„¸íŠ¸ -->
            <div class="board-search-row">

                <div class="board-search-box">
                    <input type="text" placeholder="í†µí•© ê²€ìƒ‰ (ì œëª©, ë‹‰ë„¤ì„, íƒœê·¸)">
                    <span class="board-search-icon">ğŸ”</span>
                </div>

                <div class="search-actions">
                    <!-- ì œëª© ë³´ê¸° -->
                    <button id="viewListBtn"
                            class="icon-btn active"
                            title="ì œëª© ë³´ê¸°">â˜°</button>
                    <!-- ì‚¬ì§„ ë³´ê¸° -->
                    <button id="viewPhotoBtn"
                            class="icon-btn"
                            title="ì‚¬ì§„ ë³´ê¸°">â¬š</button>
                    <!-- ì •ë ¬ -->
                    <button id="sortBtn"
                            class="icon-btn"
                            title="ì •ë ¬ (ì¸ê¸°ìˆœ / ìµœì‹ ìˆœ)">â‡…</button>
                </div>

                <!-- ì •ë ¬ ë©”ë‰´ -->
                <div id="sortMenu" class="sort-menu hidden">
                    <div class="sort-option active" data-sort="popular">
                        <span>ğŸ”¥ ì¸ê¸°ìˆœ</span>
                    </div>
                    <div class="sort-option" data-sort="latest">
                        <span>ğŸ•’ ìµœì‹ ìˆœ</span>
                    </div>
                </div>
            </div>

            <!-- ë°ìŠ¤í¬íƒ‘ì—ì„œë§Œ ë³´ì´ëŠ” +ê¸€ì“°ê¸° ë²„íŠ¼ -->
            <div class="desktop-write-btn">
                <button class="btn-primary btn-sm"
                        th:onclick="|location.href='@{/board/write}'|">
                    + ê¸€ì“°ê¸°
                </button>
            </div>
        </section>

        <!-- ===== ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ì¹´ë“œ ===== -->
        <section class="card">
            <ul class="post-list" id="postList">

                <!-- 1ë²ˆ -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">ì˜¤ëŠ˜ ì˜ì—…ë‹¹í•œ ë‚´ ìµœì•  í¬ì¹´ ìë‘í•©ë‹ˆë‹¤ ğŸ¥¹</h3>
                            <p class="post-excerpt">ì˜¤ëŠ˜ ì˜ì—…ë‹¹í•œ ë‚´ ìµœì•  í¬ì¹´ ìë‘ ê¸€ì´ì—ìš”...</p>
                            <p class="post-tag">#ì£¼ìˆ íšŒì „ #ê³ ì£ ì‚¬í† ë£¨ #í¬ì¹´</p>
                            <p class="post-meta-top">ë‹‰ë„¤ì„ Â· 3ë¶„ ì „</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">â¤ï¸108 Â· ğŸ’¬23 Â· ğŸ‘€1,024</div>
                            <div>ë‚´ ìƒˆë¼ ìë‘</div>
                        </div>
                    </div>
                </li>

                <!-- 2ë²ˆ -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">ì²« êµ¿ì¦ˆ êµí™˜ ì„±ê³µê¸°â€¦ ìš°ë¦¬ì•  ì‹¤ë¬¼ ë¯¸ì³¤ë‹¤</h3>
                            <p class="post-excerpt">êµ¿ì¦ˆ êµí™˜ í›„ê¸° ë‚¨ê²¨ìš”! ì‹¤ë¬¼ìƒ·ë„ ê°™ì´ ì˜¬ë¦½ë‹ˆë‹¤.</p>
                            <p class="post-tag">#êµ¿ì¦ˆêµí™˜ #ë¸”ë£¨ë¡ #ì‹¤ë¬¼</p>
                            <p class="post-meta-top">ë•ì¿ ì¿ ì§± Â· 10ë¶„ ì „</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">â¤ï¸52 Â· ğŸ’¬4 Â· ğŸ‘€312</div>
                            <div>ë‚´ ìƒˆë¼ ìë‘</div>
                        </div>
                    </div>
                </li>

                <!-- 3ë²ˆ -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">ì˜¤ëŠ˜ ì˜ì—…ë‹¹í•œ ë‚´ ìµœì•  í¬ì¹´ ìë‘í•©ë‹ˆë‹¤ ğŸ¥¹</h3>
                            <p class="post-excerpt">ì˜¤ëŠ˜ ì˜ì—…ë‹¹í•œ ë‚´ ìµœì•  í¬ì¹´ ìë‘ ê¸€ì´ì—ìš”...</p>
                            <p class="post-tag">#ì£¼ìˆ íšŒì „ #ê³ ì£ ì‚¬í† ë£¨ #í¬ì¹´</p>
                            <p class="post-meta-top">ë‹‰ë„¤ì„ Â· 8ë¶„ ì „</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">â¤ï¸95 Â· ğŸ’¬12 Â· ğŸ‘€842</div>
                            <div>ë‚´ ìƒˆë¼ ìë‘</div>
                        </div>
                    </div>
                </li>

                <!-- 4ë²ˆ -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">êµ¿ì¦ˆ ì •ë¦¬í•˜ë‹¤ê°€ ë°œê²¬í•œ ë ˆì „ë“œ í¬ì¹´ ğŸ˜³</h3>
                            <p class="post-excerpt">ì •ë¦¬í•˜ë‹¤ê°€ ë°œê²¬í–ˆëŠ”ë° ë„ˆë¬´ ì˜ˆë»ì„œ ì˜¬ë ¤ìš”â€¦</p>
                            <p class="post-tag">#ê·€ë©¸ì˜ì¹¼ë‚  #ë Œê³ ì¿  #ë ˆì–´í¬ì¹´</p>
                            <p class="post-meta-top">í¬ì¹´ëŸ¬ë²„ Â· 20ë¶„ ì „</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">â¤ï¸67 Â· ğŸ’¬3 Â· ğŸ‘€501</div>
                            <div>ë‚´ ìƒˆë¼ ìë‘</div>
                        </div>
                    </div>
                </li>

                <!-- 5ë²ˆ -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">ìµœì•  êµ¿ì¦ˆ ë„ì°©í•´ì„œ ë‚œë¦¬ë‚¬ë‹¤ ğŸ˜­ğŸ’œ</h3>
                            <p class="post-excerpt">ì˜¤ëŠ˜ ë°°ì†¡ ì™”ëŠ”ë° ì‹¤ë¬¼ì´ í›¨ì”¬ ì˜ˆë»ìš”â€¦</p>
                            <p class="post-tag">#í•˜ì´í #íˆë‚˜íƒ€ #êµ¿ì¦ˆê°œë´‰ê¸°</p>
                            <p class="post-meta-top">íˆë‚˜íƒ€ìµœì•  Â· 35ë¶„ ì „</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">â¤ï¸82 Â· ğŸ’¬7 Â· ğŸ‘€712</div>
                            <div>ë‚´ ìƒˆë¼ ìë‘</div>
                        </div>
                    </div>
                </li>

                <!-- 6ë²ˆ -->
                <li class="post-card">
                    <div class="post-thumb-box">IMAGE</div>
                    <div class="post-main">
                        <div>
                            <h3 class="post-title">ë“œë””ì–´ êµ¬í–ˆë‹¤â€¦ ì´ í¬ì¹´ êµ¬í•˜ê¸° ë„ˆë¬´ í˜ë“¤ì—ˆë‹¤ ğŸ˜­</h3>
                            <p class="post-excerpt">ë„ˆë¬´ ê°–ê³  ì‹¶ì—ˆë˜ í¬ì¹´ë¼ì„œ ì§„ì§œ ê°ê²©â€¦</p>
                            <p class="post-tag">#ë¸”ë£¨ë¡ #ì´ì‚¬ê¸°ìš” #ë ˆì–´í¬ì¹´</p>
                            <p class="post-meta-top">í”¼ìŠ¤í‚¤í¼ Â· 1ì‹œê°„ ì „</p>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-stats">â¤ï¸143 Â· ğŸ’¬18 Â· ğŸ‘€1,450</div>
                            <div>ë‚´ ìƒˆë¼ ìë‘</div>
                        </div>
                    </div>
                </li>

            </ul>
        </section>

    </main>
</div>

<!-- ëª¨ë°”ì¼ í”Œë¡œíŒ… ê¸€ì“°ê¸° ë²„íŠ¼ -->
<button class="write-fab"
        type="button"
        th:onclick="|location.href='@{/board/write}'|">
    +
</button>

<!-- í•˜ë‹¨ë°” -->
<nav class="bottom-nav">
    <a th:href="@{/}" class="nav-item">
        <span class="icon">ğŸ </span>
        <span>í™ˆ</span>
    </a>
    <a th:href="@{/board}" class="nav-item active">
        <span class="icon">ğŸ“</span>
        <span>ë•ì§ˆê²Œì‹œíŒ</span>
    </a>
    <a th:href="@{/trade}" class="nav-item">
        <span class="icon">ğŸ’¸</span>
        <span>êµ¿ì¦ˆê±°ë˜</span>
    </a>
    <a th:href="@{/mypage}" class="nav-item">
        <span class="icon">ğŸ‘¤</span>
        <span>ë‚´ì •ë³´</span>
    </a>
</nav>

<script>
    // ì œëª© / ì‚¬ì§„ ë³´ê¸° í† ê¸€
    const postList = document.getElementById("postList");
    const viewListBtn = document.getElementById("viewListBtn");
    const viewPhotoBtn = document.getElementById("viewPhotoBtn");

    viewListBtn.onclick = () => {
        postList.classList.remove("photo-view");
        viewListBtn.classList.add("active");
        viewPhotoBtn.classList.remove("active");
    };
    viewPhotoBtn.onclick = () => {
        postList.classList.add("photo-view");
        viewListBtn.classList.remove("active");
        viewPhotoBtn.classList.add("active");
    };

    // ì •ë ¬ ë©”ë‰´ í† ê¸€
    const sortBtn = document.getElementById("sortBtn");
    const sortMenu = document.getElementById("sortMenu");
    const sortOptions = document.querySelectorAll(".sort-option");

    sortBtn.onclick = (e) => {
        e.stopPropagation();
        sortMenu.classList.toggle("hidden");
    };

    sortOptions.forEach(option => {
        option.onclick = () => {
            sortOptions.forEach(o => o.classList.remove("active"));
            option.classList.add("active");
            sortMenu.classList.add("hidden");
            const sort = option.dataset.sort;
            console.log("ì •ë ¬ ê¸°ì¤€:", sort);
        };
    });

    document.onclick = () => sortMenu.classList.add("hidden");
    sortMenu.onclick = (e) => e.stopPropagation();
</script>

</body>
</html>