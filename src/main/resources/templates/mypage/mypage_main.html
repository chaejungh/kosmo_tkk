<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ë”ì¿ ì¿  - ë‚´ì •ë³´</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/home.css}">
    <style>
        body {
            background: #f6f3ff;
        }

        /* ìƒë‹¨ */
        .mypage-header {
            padding: 18px 20px 4px;
        }
        .mypage-title {
            font-size: 22px;
            font-weight: 700;
        }

        /* í”„ë¡œí•„ ì¹´ë“œ */
        .profile-card {
            margin: 16px;
            padding: 18px;
            background: linear-gradient(135deg, #efeaff, #f8f2ff);
            border-radius: 20px;
            box-shadow: 0 6px 20px rgba(160, 130, 255, 0.18);
        }

        .profile-main {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        /* í”„ë¡œí•„ ì´ë¯¸ì§€ */
        .avatar {
            width: 62px;
            height: 62px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ë‹‰ë„¤ì„ ì¤„ */
        .profile-text {
            flex-grow: 1;
        }
        .profile-top-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nickname-level-wrap {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nickname {
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
        }

        .level-badge {
            padding: 4px 10px;
            background: white;
            border-radius: 12px;
            color: #6b46ff;
            font-size: 11px;
            font-weight: 600;
        }

        /* í”„ë¡œí•„ ê´€ë¦¬ ë²„íŠ¼ */
        .profile-btn {
            background: white;
            border: 1px solid #d4caff;
            padding: 4px 10px;
            border-radius: 10px;
            font-size: 12px;
            cursor: pointer;
        }

        /* ì†Œê°œ ë¬¸êµ¬ */
        .bio-text {
            font-size: 13px;
            margin-top: 6px;
            color: #6b7280;
            cursor: pointer;
        }

        .editable-text:hover {
            background: #eef2ff;
            border-radius: 4px;
        }

        .inline-input {
            padding: 4px 6px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 14px;
        }

        /* ê³µí†µ ì„¹ì…˜ */
        .mypage-section-card {
            margin: 0 16px 12px;
            padding: 12px 16px;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 4px 12px rgba(15, 23, 42, 0.06);
        }

        .mypage-section-title {
            font-size: 14px;
            font-weight: 700;
            color: #6b7280;
            margin-bottom: 6px;
        }
        .mypage-section-sub {
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 8px;
        }

        /* ë©”ë‰´ ì•„ì´í…œ */
        .mypage-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            text-decoration: none;
            color: inherit;
            border-top: 1px solid #f3f4f6;
        }
        .mypage-item:first-of-type {
            border-top: none;
        }

        .mypage-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .mypage-icon-circle {
            width: 32px;
            height: 32px;
            border-radius: 999px;
            background: #f3f4ff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 17px;
        }
        .item-main {
            font-size: 13px;
            font-weight: 600;
        }
        .item-sub {
            font-size: 11px;
            color: #9ca3af;
            margin-top: 2px;
        }

        .mypage-right {
            font-size: 18px;
            color: #d1d5db;
        }

        /* ì•ˆë‚´ ë¬¸êµ¬ */
        .mypage-footer-note {
            margin: 16px;
            font-size: 11px;
            color: #9ca3af;
            line-height: 1.5;
            padding-bottom: 80px;
        }
    </style>
</head>

<body>
<div class="page">

    <!-- ìƒë‹¨ -->
    <header class="mypage-header">
        <div class="mypage-title">ë‚´ ë•ì¿ </div>
    </header>

    <main class="content">

        <!-- í”„ë¡œí•„ ì¹´ë“œ -->
        <section class="profile-card">
            <div class="profile-main">

                <label class="avatar">
                    <img id="profilePreview" src="/images/default_profile.png">
                    <input type="file" id="profileInput" accept="image/*" style="display:none;">
                </label>

                <div class="profile-text">
                    <!-- ë‹‰ë„¤ì„ + LV3 + í”„ë¡œí•„ ê´€ë¦¬ -->
                    <div class="profile-top-row">

                        <div class="nickname-level-wrap">
                            <span id="nickname" class="editable-text">ì •ë‹¤í¬</span>
                            <span class="level-badge">LV.3 ë•ì¿ </span>
                        </div>

                    </div>

                    <!-- í•œì¤„ì†Œê°œ -->
                    <p id="bio" class="editable-text bio-text">ì£¼ìˆ íšŒì „ Â· í¬ì¹´ Â· íŒì—…ìŠ¤í† ì–´ íƒí—˜ê°€</p>
                </div>
            </div>
        </section>

        <script>
            /* í”„ë¡œí•„ ì´ë¯¸ì§€ í´ë¦­ */
            document.getElementById("profilePreview").addEventListener("click", () => {
                document.getElementById("profileInput").click();
            });

            document.getElementById("profileInput").addEventListener("change", function () {
                const file = this.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = () => {
                    document.getElementById("profilePreview").src = reader.result;
                };
                reader.readAsDataURL(file);
            });

            /* inline edit */
            function enableInlineEdit(id) {
                const el = document.getElementById(id);

                el.addEventListener("click", () => {
                    if (el.querySelector("input")) return;

                    const current = el.innerText;
                    const input = document.createElement("input");
                    input.value = current;
                    input.className = "inline-input";
                    el.innerHTML = "";
                    el.appendChild(input);
                    input.focus();

                    const save = () => {
                        el.innerText = input.value.trim() || current;
                    };

                    input.addEventListener("blur", save);
                    input.addEventListener("keypress", e => {
                        if (e.key === "Enter") input.blur();
                    });
                });
            }

            enableInlineEdit("nickname");
            enableInlineEdit("bio");

        </script>

        <!-- ë‚˜ì˜ ê±°ë˜ -->
        <section class="mypage-section-card">
            <div class="mypage-section-title">ë‚˜ì˜ ê±°ë˜</div>
            <div class="mypage-section-sub">êµ¿ì¦ˆê±°ë˜ì—ì„œ ë‚´ê°€ ì˜¬ë¦° ê¸€ì„ ëª¨ì•„ë³¼ ìˆ˜ ìˆì–´ìš”.</div>

            <a th:href="@{/mypage/posts/trade}" class="mypage-item">
                <div class="mypage-left">
                    <div class="mypage-icon-circle">ğŸ’¸</div>
                    <div>
                        <div class="item-main">ë‚´ êµ¿ì¦ˆê±°ë˜ ê¸€</div>
                        <div class="item-sub">íŒë§¤ Â· êµí™˜ Â· ì–‘ë„ ê¸€ ê´€ë¦¬</div>
                    </div>
                </div>
                <div class="mypage-right">â€º</div>
            </a>

            <a th:href="@{/trade}" class="mypage-item">
                <div class="mypage-left">
                    <div class="mypage-icon-circle">ğŸ§¾</div>
                    <div>
                        <div class="item-main">ê±°ë˜ì¤‘ì¸ ê¸€ ë³´ê¸°</div>
                        <div class="item-sub">ì§„í–‰ ì¤‘ ê±°ë˜ ìƒíƒœ</div>
                    </div>
                </div>
                <div class="mypage-right">â€º</div>
            </a>
        </section>

        <!-- ë‚˜ì˜ í™œë™ -->
        <section class="mypage-section-card">
            <div class="mypage-section-title">ë‚˜ì˜ í™œë™</div>
            <div class="mypage-section-sub">ë•ì§ˆê²Œì‹œíŒì—ì„œ ë‚´ê°€ ë‚¨ê¸´ ê¸°ë¡.</div>

            <a th:href="@{/mypage/posts/board}" class="mypage-item">
                <div class="mypage-left">
                    <div class="mypage-icon-circle">ğŸ“</div>
                    <div>
                        <div class="item-main">ë‚´ê°€ ì“´ ê²Œì‹œê¸€</div>
                        <div class="item-sub">í›„ê¸° Â· ì •ë³´ Â· ìë‘ ê¸€</div>
                    </div>
                </div>
                <div class="mypage-right">â€º</div>
            </a>

            <a th:href="@{/mypage/favorites/likes}" class="mypage-item">
                <div class="mypage-left">
                    <div class="mypage-icon-circle">ğŸ’—</div>
                    <div>
                        <div class="item-main">ì¢‹ì•„ìš” í•œ ê¸€</div>
                        <div class="item-sub">ë‹¤ì‹œ ë³´ê³  ì‹¶ì€ ê²Œì‹œê¸€</div>
                    </div>
                </div>
                <div class="mypage-right">â€º</div>
            </a>
        </section>

        <!-- ë‚˜ì˜ ê´€ì‹¬ -->
        <section class="mypage-section-card">
            <div class="mypage-section-title">ë‚˜ì˜ ê´€ì‹¬</div>
            <div class="mypage-section-sub">ì°œí•œ êµ¿ì¦ˆì™€ ë¶ë§ˆí¬í•œ ë§¤ì¥ì„ í•œ ë²ˆì— ê´€ë¦¬í•´ìš”.</div>

            <a th:href="@{/mypage/favorites/favorites}" class="mypage-item">
                <div class="mypage-left">
                    <div class="mypage-icon-circle">â­</div>
                    <div>
                        <div class="item-main">ì°œí•œ êµ¿ì¦ˆ</div>
                        <div class="item-sub">ë‚˜ì¤‘ì— ì‚¬ê³  ì‹¶ì€ êµ¿ì¦ˆ</div>
                    </div>
                </div>
                <div class="mypage-right">â€º</div>
            </a>

            <a th:href="@{/mypage/bookmarks}" class="mypage-item">
                <div class="mypage-left">
                    <div class="mypage-icon-circle">ğŸ“</div>
                    <div>
                        <div class="item-main">ë¶ë§ˆí¬í•œ ë§¤ì¥</div>
                        <div class="item-sub">ì¦ê²¨ì°¾ëŠ” êµ¿ì¦ˆìƒµ</div>
                    </div>
                </div>
                <div class="mypage-right">â€º</div>
            </a>
        </section>

        <!-- ê³ ê°ì§€ì› & ì„¤ì • -->
        <section class="mypage-section-card">
            <div class="mypage-section-title">ê³ ê° ì§€ì›</div>

            <a th:href="@{/mypage/notices}" class="mypage-item">
                <div class="mypage-left">
                    <div class="mypage-icon-circle">ğŸ“¢</div>
                    <div>
                        <div class="item-main">ê³µì§€ì‚¬í•­</div>
                        <div class="item-sub">ì—…ë°ì´íŠ¸ ì†Œì‹</div>
                    </div>
                </div>
                <div class="mypage-right">â€º</div>
            </a>

            <a th:href="@{/mypage/inquiries}" class="mypage-item">
                <div class="mypage-left">
                    <div class="mypage-icon-circle">ğŸ’¬</div>
                    <div>
                        <div class="item-main">ë¬¸ì˜ Â· ì‹ ê³ </div>
                        <div class="item-sub">ë²„ê·¸ Â· ì‹ ê³  Â· ë¬¸ì˜</div>
                    </div>
                </div>
                <div class="mypage-right">â€º</div>
            </a>

            <div style="height:8px;"></div>

            <div class="mypage-section-title">ì„¤ì •</div>

            <a th:href="@{/mypage/settings}" class="mypage-item">
                <div class="mypage-left">
                    <div class="mypage-icon-circle">âš™ï¸</div>
                    <div>
                        <div class="item-main">ì•± Â· ê³„ì • ì„¤ì •</div>
                        <div class="item-sub">ì•Œë¦¼ / ë³´ì•ˆ / íƒˆí‡´</div>
                    </div>
                </div>
                <div class="mypage-right">â€º</div>
            </a>
        </section>

        <p class="mypage-footer-note">
            ë”ì¿ ì¿ ëŠ” êµ¿ì¦ˆ ê±°ë˜ë¥¼ ë•ëŠ” í”Œë«í¼ì´ë©° ì‹¤ì œ ê±°ë˜ ë‹¹ì‚¬ìê°€ ì•„ë‹ˆì—ìš”.<br>
            ê±°ë˜ ì‹œ ì‚¬ê¸°Â·ë¶„ìŸì— ì£¼ì˜í•´ì£¼ì„¸ìš”.
        </p>

    </main>
</div>

<!-- í•˜ë‹¨ë°” -->
<nav class="bottom-nav">
    <a th:href="@{/}" class="nav-item">
        <span class="icon">ğŸ </span><span>í™ˆ</span>
    </a>
    <a th:href="@{/board}" class="nav-item">
        <span class="icon">ğŸ“</span><span>ë•ì§ˆê²Œì‹œíŒ</span>
    </a>
    <a th:href="@{/trade}" class="nav-item">
        <span class="icon">ğŸ’¸</span><span>êµ¿ì¦ˆê±°ë˜</span>
    </a>
    <a th:href="@{/mypage}" class="nav-item active">
        <span class="icon">ğŸ‘¤</span><span>ë‚´ì •ë³´</span>
    </a>
</nav>

</body>
</html>