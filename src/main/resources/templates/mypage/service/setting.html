<!DOCTYPE html>
<html lang="ko"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{fragments/fragments/mypage_fragment/layout}">
<head>
    <th:block layout:fragment="head">
        <script src="/bootstrap-5.3.8-dist/js/bootstrap.bundle.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
              rel="stylesheet"
              integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
              crossorigin="anonymous">

        <!-- âœ… í¬ê¸°/ë·°ë§Œ ë§ì¶¤ (ê¸°ëŠ¥/ë¡œì§/ID ê·¸ëŒ€ë¡œ) -->
        <style>
            /* ===== ë©”ì¸ ë§ˆì´í˜ì´ì§€ë‘ ë™ì¼í•œ ë°°ê²½/í­ ëŠë‚Œ ===== */
            .mypage-bg{
                background:#f3f4f6;
                padding: 26px 0 64px;
                min-height: calc(100vh - 120px);
            }
            .mypage-container{
                width: min(1100px, 92vw);
                margin: 0 auto;
            }

            /* ===== í˜ì´ì§€ ìƒë‹¨ íƒ€ì´í‹€(ë©”ì¸ ëŠë‚Œ) ===== */
            .mypage-top{
                margin-bottom: 14px;
                display:flex;
                justify-content: space-between;
                align-items: flex-end;
                gap: 12px;
            }
            .page-title{
                margin: 0;
                font-size: 22px;
                font-weight: 900;
                letter-spacing: -0.2px;
            }
            .page-sub{
                margin: 6px 0 0;
                font-size: 13px;
                font-weight: 700;
                color: #6b7280;
            }

            /* ===== ë©”ì¸ í˜ì´ì§€ â€œì˜¤ë¥¸ìª½ íŒ¨ë„â€ ê°™ì€ í­ ===== */
            .setting-wrap{
                max-width: 880px;
                margin: 0 auto;
                display: grid;
                gap: 16px;
            }

            /* ===== ì¹´ë“œ(ë©”ì¸ ì¹´ë“œ ëŠë‚Œìœ¼ë¡œ) ===== */
            .mypage-section.card{
                border: 1px solid #eef2f7 !important;
                border-radius: 18px !important;
                box-shadow: 0 10px 26px rgba(0,0,0,0.06) !important;
                overflow: hidden;
            }
            .mypage-section .card-header{
                background: #fff;
                border-bottom: 1px solid #f1f5f9;
                padding: 14px 16px;
            }
            .mypage-section .card-title{
                font-size: 16px;
                font-weight: 900;
                margin: 0;
                display:flex;
                align-items:center;
                gap: 8px;
            }

            /* ë¶€íŠ¸ìŠ¤íŠ¸ë© list-group ì¢€ ë” ê¹”ë”í•˜ê²Œ */
            .list-group-item{
                padding: 14px 16px;
            }
            .list-group-item strong{
                font-size: 14px;
            }

            /* ===== í† ê¸€ ë¦¬ìŠ¤íŠ¸ ===== */
            .simple-list{
                list-style:none;
                margin:0;
                padding: 8px 0;
            }
            .toggle-item{
                display:flex;
                align-items:center;
                justify-content:space-between;
                padding: 12px 16px;
                border-top: 1px solid #f1f5f9;
                font-weight: 800;
                color: #111827;
            }
            .toggle-item:first-child{ border-top: none; }

            .link-list li{
                border-top: 1px solid #f1f5f9;
                padding: 0;
            }
            .link-list li:first-child{ border-top:none; }
            .link-list a{
                display:block;
                padding: 12px 16px;
                text-decoration:none;
                font-weight: 800;
                color:#111827;
            }
            .link-list a:hover{
                background:#f8fafc;
            }

            /* ===== ìŠ¤ìœ„ì¹˜ UI(ê¸°ëŠ¥ì€ input ê·¸ëŒ€ë¡œ) ===== */
            .tkk-switch{
                position: relative;
                display:inline-block;
                width: 44px;
                height: 26px;
            }
            .tkk-switch input{
                opacity:0;
                width:0;
                height:0;
            }
            .tkk-slider{
                position:absolute;
                cursor:pointer;
                inset:0;
                background:#e5e7eb;
                transition:.2s;
                border-radius:999px;
            }
            .tkk-slider:before{
                content:"";
                position:absolute;
                height: 20px;
                width: 20px;
                left: 3px;
                top: 3px;
                background:white;
                transition:.2s;
                border-radius:50%;
                box-shadow: 0 6px 14px rgba(0,0,0,0.12);
            }
            .tkk-switch input:checked + .tkk-slider{
                background:#111827;
            }
            .tkk-switch input:checked + .tkk-slider:before{
                transform: translateX(18px);
            }

            /* ===== ë°˜ì‘í˜• ===== */
            @media (max-width: 720px){
                .mypage-bg{ padding: 18px 0 54px; }
                .page-title{ font-size: 20px; }
                .setting-wrap{ max-width: 100%; }
            }
        </style>
    </th:block>
</head>

<body>
<div layout:fragment="content">

    <!-- âœ… ë©”ì¸ ë§ˆì´í˜ì´ì§€ë‘ ë™ì¼í•œ â€œë°°ê²½/í­â€ ë˜í¼ -->
    <div class="mypage-bg">
        <div class="mypage-container">

            <!-- ìƒë‹¨ íƒ€ì´í‹€(ë·°ë§Œ) -->
            <div class="mypage-top">
                <div>
                    <h2 class="page-title">ì„¤ì • & ê³ ê°ì„¼í„°</h2>
                    <p class="page-sub">ê³„ì • ì •ë³´, ì•Œë¦¼, ì•± í™˜ê²½ ì„¤ì •ì„ ê´€ë¦¬í•´ìš”.</p>
                </div>
            </div>

            <!-- âœ… ë‚´ìš© í­(ë©”ì¸ ëŠë‚Œ) -->
            <div class="setting-wrap">

                <!-- ê³„ì • ì„¹ì…˜ -->
                <section class="card mypage-section">
                    <div class="card-header">
                        <div class="card-title">
                            <span>ê³„ì •</span>
                        </div>
                    </div>
                    <ul class="list-group list-group-flush">
                        <!-- âœ… ìˆœì„œ ë³€ê²½: ê°€ì…ì¼ â†’ ì´ë©”ì¼ â†’ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong>ê°€ì…ì¼</strong><br>
                                <small th:text="${#temporals.format(member.createdAt, 'yyyy-MM-dd')}"
                                       class="text-muted">2025-11-01</small>
                            </div>
                        </li>

                        <!-- ì´ë©”ì¼ ë³€ê²½ -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong>ë¡œê·¸ì¸ ì´ë©”ì¼</strong><br>
                                <small class="text-muted">
                                    í˜„ì¬: <span th:text="${member.email}">ì´ë©”ì¼</span>
                                </small>
                            </div>
                            <button type="button"
                                    class="btn btn-outline-secondary btn-sm"
                                    data-bs-toggle="modal"
                                    data-bs-target="#emailModal">
                                ë³€ê²½
                            </button>
                        </li>

                        <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong>ë¹„ë°€ë²ˆí˜¸</strong><br>
                            </div>

                            <button type="button"
                                    class="btn btn-outline-primary btn-sm"
                                    data-bs-toggle="modal"
                                    data-bs-target="#passwordModal">
                                ë³€ê²½
                            </button>
                        </li>

                    </ul>
                </section>

                <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëª¨ë‹¬ -->
                <div class="modal fade" id="passwordModal" tabindex="-1" aria-labelledby="passwordModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" style="max-width: 320px;">
                        <div class="modal-content" style="border-radius: 10px;">
                            <div class="modal-header">
                                <h5 class="modal-title" id="passwordModalLabel">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
                            </div>

                            <div class="modal-body">

                                <!-- ğŸ”¥ ì—ëŸ¬ ë©”ì‹œì§€ ë°•ìŠ¤ -->
                                <div id="pwErrorMsg"
                                     style="display:none; background:#fee2e2; color:#b91c1c;
                                    padding:8px; border-radius:8px; font-size:12px; margin-bottom:12px;">
                                </div>

                                <!-- ğŸ”¥ ì•ˆë‚´ë¬¸ ì¶”ê°€ -->
                                <p style="font-size:12px; color:#6b7280; margin-bottom:10px;">
                                    ë¹„ë°€ë²ˆí˜¸ëŠ” <b>íŠ¹ìˆ˜ë¬¸ì 1ê°œ ì´ìƒ</b> í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
                                </p>

                                <form id="pwForm" th:action="@{/mypage/service/updatePassword}" method="post">

                                    <input type="hidden" name="memberId" th:value="${member.id}" />

                                    <!-- ìƒˆ ë¹„ë°€ë²ˆí˜¸ -->
                                    <input type="password" id="newPw" name="loginPw" class="form-control mb-2"
                                           placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" required
                                           style="height:40px; border-radius:8px;">

                                    <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
                                    <input type="password" id="newPwConfirm" class="form-control mb-3"
                                           placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥" required
                                           style="height:40px; border-radius:8px;">

                                    <div class="text-end">
                                        <button type="submit" class="btn btn-primary btn-sm">ë³€ê²½</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ë³€ê²½ ì„±ê³µ í† ìŠ¤íŠ¸ -->
                <div class="toast-container position-fixed p-3" style="top: 20px; right: 20px; z-index: 2000;">
                    <div id="changeSuccessToast" class="toast align-items-center text-white bg-success border-0"
                         role="alert" aria-live="assertive" aria-atomic="true">
                        <div class="d-flex">
                            <div class="toast-body">
                                ë³€ê²½ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
                            </div>
                            <button type="button" class="btn-close btn-close-white me-2 m-auto"
                                    data-bs-dismiss="toast" aria-label="Close"></button>
                        </div>
                    </div>
                </div>

                <!--íšŒì›íƒˆí‡´ ëª¨ë‹¬ ì¶”ê°€-->
                <div id="deleteModal"
                     style="
                        display:none;
                        position:fixed;
                        top:0;
                        left:0;
                        width:100%;
                        height:100%;
                        background:rgba(0,0,0,0.45);
                        justify-content:center;
                        align-items:center;
                        z-index:9999;
                     ">

                    <div style="
                        width:260px;
                        background:white;
                        padding:20px;
                        border-radius:10px;
                        text-align:center;
                        z-index:10000;
                    ">
                        <h5 style="font-size:15px;">ì •ë§ë¡œ íšŒì› íƒˆí‡´ë¥¼ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h5>
                        <p style="font-size:12px; color:gray;">ê³„ì •ê³¼ ëª¨ë“  í™œë™ ë‚´ì—­ì´ ì‚­ì œë©ë‹ˆë‹¤.</p>

                        <button onclick="confirmDelete()" class="btn btn-danger btn-sm"
                                style="width:100%; margin-top:10px;">íšŒì› íƒˆí‡´</button>

                        <button onclick="closeDeleteModal()" class="btn btn-secondary btn-sm"
                                style="width:100%; margin-top:10px;">ì·¨ì†Œ</button>
                    </div>
                </div>

                <!-- ì´ë©”ì¼ ë³€ê²½ ëª¨ë‹¬ -->
                <div class="modal fade" id="emailModal" tabindex="-1" aria-labelledby="emailModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" style="max-width: 320px;">
                        <div class="modal-content" style="border-radius: 10px;">
                            <div class="modal-header">
                                <h5 class="modal-title" id="emailModalLabel">ì´ë©”ì¼ ë³€ê²½</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
                            </div>
                            <div class="modal-body text-center">
                                <form th:action="@{/mypage/service/updateEmail}" method="post">
                                    <!-- ë¡œê·¸ì¸ëœ íšŒì› ID -->
                                    <input type="hidden" name="memberId" th:value="${member.id}"/>

                                    <div class="mb-3">
                                        <label class="form-label">í˜„ì¬ ì´ë©”ì¼</label>
                                        <input type="email" class="form-control" th:value="${member.email}" readonly>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">ìƒˆ ì´ë©”ì¼</label>
                                        <input type="email" name="email" class="form-control" placeholder="ìƒˆ ì´ë©”ì¼ ì…ë ¥" required>
                                    </div>

                                    <div class="text-end">
                                        <button type="submit" class="btn btn-primary btn-sm">ë³€ê²½</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì•Œë¦¼ ì„¤ì • ì„¹ì…˜ -->
                <section class="card mypage-section">
                    <div class="card-header">
                        <div class="card-title">
                            <span>ì•Œë¦¼ ì„¤ì •</span>
                        </div>
                    </div>

                    <ul class="simple-list">
                        <li class="toggle-item">
                            <span>ë©”ì‹œì§€ ì•Œë¦¼</span>
                            <label class="tkk-switch">
                                <input type="checkbox" id="messageToggle" checked>
                                <span class="tkk-slider"></span>
                            </label>
                        </li>

                        <li class="toggle-item">
                            <span>ê±°ë˜ ìƒíƒœ ë³€ê²½ ì•Œë¦¼</span>
                            <label class="tkk-switch">
                                <input type="checkbox" checked id="tradeToggle">
                                <span class="tkk-slider"></span>
                            </label>
                        </li>

                        <li class="toggle-item">
                            <span>ì¢‹ì•„ìš”/ëŒ“ê¸€ ì•Œë¦¼</span>
                            <label class="tkk-switch">
                                <input type="checkbox" id="likeToggle">
                                <span class="tkk-slider"></span>
                            </label>
                        </li>

                        <li class="toggle-item">
                            <span>ë¬¸ì˜ ë‹µë³€ ì•Œë¦¼</span>
                            <label class="tkk-switch">
                                <input type="checkbox" id="inquiryToggle">
                                <span class="tkk-slider"></span>
                            </label>
                        </li>

                        <li class="toggle-item">
                            <span>ê³µì§€/ì´ë²¤íŠ¸ ì•Œë¦¼</span>
                            <label class="tkk-switch">
                                <input type="checkbox" id="noticeToggle">
                                <span class="tkk-slider"></span>
                            </label>
                        </li>
                    </ul>
                </section>

                <!-- ê¸°íƒ€ ì„¹ì…˜ -->
                <section class="card mypage-section">
                    <div class="card-header">
                        <div class="card-title">
                            <span>ê¸°íƒ€</span>
                        </div>
                    </div>
                    <ul class="simple-list link-list">
                        <li><a href="/mypage/service/terms">ì•½ê´€ ë³´ê¸°</a></li>
                        <li><a href="/mypage/service/privacy">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a></li>
                        <li><a href="javascript:void(0)" onclick="openDeleteModal()">íšŒì› íƒˆí‡´</a></li>
                    </ul>
                </section>

            </div><!-- /setting-wrap -->
        </div><!-- /mypage-container -->
    </div><!-- /mypage-bg -->

</div>


<script layout:fragment="script" th:inline="javascript">

    function openDeleteModal() {
        document.getElementById("deleteModal").style.display = "flex";
    }

    function closeDeleteModal() {
        document.getElementById("deleteModal").style.display = "none";
    }

    function confirmDelete() {
        // JSì— member.id ì£¼ì… ì—†ì´, ì„¸ì…˜ì—ì„œ ê°€ì ¸ì™€ ì‚­ì œ
        window.location.href = "/auth/delete-me";
    }


    //const memberId = [[${memberId}]];

    function showToast(message) {
        const toastEl = document.getElementById('tkkToast');
        toastEl.querySelector(".toast-body").innerText = message;
        new bootstrap.Toast(toastEl).show();
    }

    document.addEventListener("DOMContentLoaded", () => {
        const likeToggle = document.getElementById("likeToggle");

        likeToggle.addEventListener("change", () => {
            if (likeToggle.checked) {
                showToast("ğŸ“¢ ì¢‹ì•„ìš”/ëŒ“ê¸€ ì•Œë¦¼ì´ ì¼œì¡Œì–´ìš” ");
            } else {
                showToast("ğŸ“¢ ì¢‹ì•„ìš”/ëŒ“ê¸€ ì•Œë¦¼ì´ êº¼ì¡Œì–´ìš” ");
            }
        });
    });

    // ====== ì•Œë¦¼ í† ê¸€ LocalStorage ì €ì¥ ======
    const alertToggle = document.getElementById("likeToggle");
    window.addEventListener("load", () => {
        const saved = localStorage.getItem("board_alert_on");

        if (saved === "Y") {
            alertToggle.checked = true;
        } else if (saved === "N") {
            alertToggle.checked = false;
        } else {
            alertToggle.checked = true;
            localStorage.setItem("board_alert_on", "Y");
        }
    });

    alertToggle.addEventListener("change", () => {
        localStorage.setItem("board_alert_on", alertToggle.checked ? "Y" : "N");
    });


    //====== SSE ì•Œë¦¼ ìˆ˜ì‹  + í† ìŠ¤íŠ¸ ë„ìš°ê¸° ======

    /*const es = new EventSource(`/alarm/stream/${memberId}`);

    es.addEventListener("notification", (event) => {
        const setting = localStorage.getItem("board_alert_on");
        if (setting === "N") return;
        showToast(event.data);
    });*/

    // ===== ë©”ì‹œì§€ ì•Œë¦¼ í† ê¸€ =====
    const messageToggle = document.getElementById("messageToggle");

    // í˜ì´ì§€ ë¡œë”© ì‹œ ì €ì¥ëœ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
    window.addEventListener("load", () => {
        const saved = localStorage.getItem("message_alert_on");

        if (saved === "Y") {
            messageToggle.checked = true;
        } else if (saved === "N") {
            messageToggle.checked = false;
        } else {
            messageToggle.checked = true;
            localStorage.setItem("message_alert_on", "Y");
        }
    });

    // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê²€ì¦
    document.addEventListener("DOMContentLoaded", () => {

        const form = document.getElementById("pwForm");
        const pw = document.getElementById("newPw");
        const pwConfirm = document.getElementById("newPwConfirm");
        const errorBox = document.getElementById("pwErrorMsg");

        const specialChar = /[!@#$%^&*(),.?":{}|<>]/;

        form.addEventListener("submit", function (e) {

            // 1) ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜ ì—¬ë¶€ í™•ì¸
            if (pw.value !== pwConfirm.value) {
                e.preventDefault();
                errorBox.style.display = "block";
                errorBox.innerText = "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
                return;
            }

            // 2) íŠ¹ìˆ˜ë¬¸ì í¬í•¨ ì—¬ë¶€ í™•ì¸
            if (!specialChar.test(pw.value)) {
                e.preventDefault();
                errorBox.style.display = "block";
                errorBox.innerText = "ë¹„ë°€ë²ˆí˜¸ì—ëŠ” ìµœì†Œ 1ê°œ ì´ìƒì˜ íŠ¹ìˆ˜ë¬¸ìê°€ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.";
                return;
            }

            // ê²€ì¦ í†µê³¼ â†’ ì œì¶œ
            errorBox.style.display = "none";
        });
    });

    document.addEventListener("DOMContentLoaded", function () {

        let msg = /*[[${msg}]]*/ null;

        if (msg) {
            const toastEl = document.getElementById("changeSuccessToast");
            const toast = new bootstrap.Toast(toastEl);
            toast.show();
        }
    });


    // í† ê¸€ ë³€ê²½ ì‹œ ì €ì¥ + í† ìŠ¤íŠ¸
    messageToggle.addEventListener("change", () => {
        const isOn = messageToggle.checked;

        localStorage.setItem("message_alert_on", isOn ? "Y" : "N");

        if (isOn) {
            showToast("ğŸ“¢ ë©”ì‹œì§€ ì•Œë¦¼ì´ ì¼œì¡Œì–´ìš”");
        } else {
            showToast("ğŸ“¢ ë©”ì‹œì§€ ì•Œë¦¼ì´ êº¼ì¡Œì–´ìš”");
        }
    });

    // ===== ë¬¸ì˜ ë‹µë³€ ì•Œë¦¼ í† ê¸€ =====
    const inquiryToggle = document.getElementById("inquiryToggle");

    // ë¡œì»¬ ì €ì¥ëœ ìƒíƒœ ë¶ˆëŸ¬ì˜¤ê¸°
    window.addEventListener("load", () => {
        const saved = localStorage.getItem("inquiry_alert_on");

        if (saved === "Y") {
            inquiryToggle.checked = true;
        } else if (saved === "N") {
            inquiryToggle.checked = false;
        } else {
            // ê¸°ë³¸ê°’ ON
            inquiryToggle.checked = true;
            localStorage.setItem("inquiry_alert_on", "Y");
        }
    });

    // í† ê¸€ ON/OFF ì‹œ í† ìŠ¤íŠ¸ ë„ìš°ê¸°
    inquiryToggle.addEventListener("change", () => {
        const isOn = inquiryToggle.checked;

        // ë¡œì»¬ ì €ì¥
        localStorage.setItem("inquiry_alert_on", isOn ? "Y" : "N");

        // í† ìŠ¤íŠ¸ ì¶œë ¥
        if (isOn) {
            showToast("ğŸ“¢ ë¬¸ì˜ ë‹µë³€ ì•Œë¦¼ì´ ì¼œì¡Œì–´ìš”");
        } else {
            showToast("ğŸ“¢ ë¬¸ì˜ ë‹µë³€ ì•Œë¦¼ì´ êº¼ì¡Œì–´ìš”");
        }
    });

    // ===== ê±°ë˜ ìƒíƒœ ë³€ê²½ ì•Œë¦¼ í† ê¸€ =====
    const tradeToggle = document.getElementById("tradeToggle");

    // ì €ì¥ëœ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
    window.addEventListener("load", () => {
        const saved = localStorage.getItem("trade_alert_on");

        if (saved === "Y") {
            tradeToggle.checked = true;
        } else if (saved === "N") {
            tradeToggle.checked = false;
        } else {
            tradeToggle.checked = true; // ê¸°ë³¸ê°’ ON
            localStorage.setItem("trade_alert_on", "Y");
        }
    });

    // ON/OFF ì‹œ í† ìŠ¤íŠ¸
    tradeToggle.addEventListener("change", () => {
        const isOn = tradeToggle.checked;

        localStorage.setItem("trade_alert_on", isOn ? "Y" : "N");

        if (isOn) {
            showToast("ğŸ“¢ ê±°ë˜ ìƒíƒœ ë³€ê²½ ì•Œë¦¼ì´ ì¼œì¡Œì–´ìš”");
        } else {
            showToast("ğŸ“¢ ê±°ë˜ ìƒíƒœ ë³€ê²½ ì•Œë¦¼ì´ êº¼ì¡Œì–´ìš”");
        }
    });

    // ===== ê³µì§€/ì´ë²¤íŠ¸ ì•Œë¦¼ í† ê¸€ =====
    const noticeToggle = document.getElementById("noticeToggle");

    // ì €ì¥ëœ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
    window.addEventListener("load", () => {
        const saved = localStorage.getItem("notice_alert_on");

        if (saved === "Y") {
            noticeToggle.checked = true;
        } else if (saved === "N") {
            noticeToggle.checked = false;
        } else {
            noticeToggle.checked = true; // ê¸°ë³¸ê°’ ON
            localStorage.setItem("notice_alert_on", "Y");
        }
    });

    // ON/OFF ì‹œ í† ìŠ¤íŠ¸
    noticeToggle.addEventListener("change", () => {
        const isOn = noticeToggle.checked;

        localStorage.setItem("notice_alert_on", isOn ? "Y" : "N");

        if (isOn) {
            showToast("ğŸ“¢ ê³µì§€/ì´ë²¤íŠ¸ ì•Œë¦¼ì´ ì¼œì¡Œì–´ìš”");
        } else {
            showToast("ğŸ“¢ ê³µì§€/ì´ë²¤íŠ¸ ì•Œë¦¼ì´ êº¼ì¡Œì–´ìš”");
        }
    });

</script>
</body>
</html>